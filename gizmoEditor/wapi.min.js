wapi=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1),o={};o.sayHello=function(){console.log("Temp!")},o.createAPI=function(){return new r},e.exports=o},function(e,t,n){(function(t){e.exports=function(){var e=function(){function e(){m=R.append("a"),m.node().innerHTML="hiddenExporter",m.style("position","absolute"),m.style("top","70"),m.style("left","10px"),m.style("display","none")}function r(){var e,t;for(e=0;e<x.length;e++)t=x[e],t.indexOf(":")!==-1&&(t=t.replace(":","")),C.push(t);for(e=0;e<w.length;e++)t=w[e],t.indexOf(":")!==-1&&(t=t.replace(":","")),L.push(t);for(e=0;e<b.length;e++)t=b[e],t.indexOf(":")!==-1&&(t=t.replace(":","")),P.push(t)}function o(e){var t=JSON.parse(H);E.elementsConfig=t,H=[],e&&e(),E.graph.initializeRendering(),E.graph.createDummyNode(),E.graph.drawElements(),E.graph.createFroceDirectedLayout()}function i(e){var t=E.config.canvas;e.style("width",t.width()),e.style("height",t.height()),e.style("background-color",t.bgColor()),A=e.append("svg"),A.node().id="canvasSVG",_=A.append("g"),_.node().id="graphRootGroup";for(var n=t.getLayers(),r=0;r<n.length;r++){var o=_.append("g");o.node().id=D+n[r]}E.updateCanvasAreaSize()}function a(e,n,r,o){S="defaultGizmoConfig.json",t.xhr(n,"application/json",function(t,i){return null!==t&&500===t.status?(console.log(t),void console.log("HAS AN ERROR AND A STATUS WHILE LOADING "+n)):(k=n,e.push(i.responseText),void(r&&r(o)))})}function s(e,t,n){d(e),E.graph.updateRenderingPrimitivesWithCallBack(t,n)}function l(e){d(e),E.graph.updateRenderingPrimitives(),console.log(">>>>>>>>>>>>>>..NOTATION SHOULD HAVE UPDATED THE GRAPH!")}function d(e){var t=JSON.parse(e);E.graph.addNotation(t);for(var n=t.gizmoAnnotations,r=0;r<n.length;r++){var o,i=n[r].iri,a=i.lastIndexOf("#");a>0&&(o=i.substr(a+1)),u(o,n[r].annotations)}}function p(e){var t={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",owl:"http://www.w3.org/2002/07/owl#",xsd:"http://www.w3.org/2001/XMLSchema#",dc:"http://purl.org/dc/elements/1.1/#",xml:"http://www.w3.org/XML/1998/namespace"};for(var n in t)if(t.hasOwnProperty(n)&&0===e.indexOf(t[n])){var r=n,o=e.split(t[n])[1];return r+":"+o}if(e.indexOf("http")===-1&&e.indexOf(":")!==-1){var r=e.split(":")[0],o=e.split(":")[1];return t.hasOwnProperty(r)?r+o:o}return e}function u(e,t){var n=t.targetElement,r=p(n);if(r===n){var o=n.split("#");r=o[1]}e=r;var i=E.elementsConfig[e];void 0===i&&(C.indexOf(e)!==-1&&void 0!==E.elementsConfig[C[0]]&&(E.elementsConfig[e]=JSON.parse(JSON.stringify(E.elementsConfig[C[0]]))),L.indexOf(e)!==-1&&void 0!==E.elementsConfig[L[0]]&&(E.elementsConfig[e]=JSON.parse(JSON.stringify(E.elementsConfig[L[0]]))),P.indexOf(e)!==-1&&void 0!==E.elementsConfig[P[0]]&&(E.elementsConfig[e]=JSON.parse(JSON.stringify(E.elementsConfig[P[0]]))),i=E.elementsConfig[e],void 0===i&&(E.elementsConfig[e]={},i=E.elementsConfig[e]));for(var a in t)if(t.hasOwnProperty(a)){var s;if("string"==typeof t[a]){if(s=t[a],"roundedCorner"===a){var l=s.split(",");s=[],s.push(l[0]),s.push(l[1])}}else s=t[a][0].value;var d=i[a];s!==d&&(E.elementsConfig[e][a]=s)}}function c(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return{x:n/o,y:r/o}}function g(e,t,n,r,o){if("circle"===t.renderingType){var i=parseInt(n.getRadius())+o;return e.x1=n.x+i*r.x,void(e.y1=n.y+i*r.y)}var a,s,l,d;if("ellipse"===t.renderingType&&(a=n.getRenderingShape().attr("width"),s=n.getRenderingShape().attr("height"),l=.5*parseFloat(a),d=.5*parseFloat(s),e.x1=n.x+l*r.x,e.y1=n.y+d*r.y),"rect"===t.renderingType){var p=n.getExpectedShapeSize();a=p.w,s=p.h,l=.5*parseFloat(a),d=.5*parseFloat(s);var u=1;u=Math.abs(r.x)>=Math.abs(r.y)?1/Math.abs(r.x):1/Math.abs(r.y),e.x1=n.x+u*l*r.x,e.y1=n.y+u*d*r.y}}function f(e,t,n,r,o){if("circle"===t.renderingType){var i=parseInt(n.getRadius())+o;return e.x2=n.x+i*r.x,void(e.y2=n.y+i*r.y)}var a,s,l,d;if("ellipse"===t.renderingType&&(a=n.getRenderingShape().attr("width"),s=n.getRenderingShape().attr("height"),l=.5*parseFloat(a),d=.5*parseFloat(s),e.x2=n.x+l*r.x,e.y2=n.y+d*r.y),"rect"===t.renderingType){var p=n.getExpectedShapeSize();a=p.w,s=p.h,l=.5*parseFloat(a),d=.5*parseFloat(s);var u=1;u=Math.abs(r.x)>=Math.abs(r.y)?1/Math.abs(r.x):1/Math.abs(r.y),e.x2=n.x+u*l*r.x,e.y2=n.y+u*d*r.y}}function h(e,t){void 0!==t&&(j[e]=p(t.annotations.assertionDatatypeValue))}function v(e){for(var t=JSON.parse(e),n=t.gizmoAnnotations,r=0;r<n.length;r++){var o,i=n[r].iri,a=i.lastIndexOf("#");a>0&&(o=i.substr(a+1)),n[r].annotations&&h(o,n[r])}}var y,m,x=["defaultNodeElement","owl:Thing","owl:Class","owl:equivalentClass","rdfs:Resource"],w=["defaultPropertyElement","owl:DatatypeProperty","owl:ObjectProperty","rdfs:subClassOf","setOperatorProperty"],b=["defaultDatatypeElement","rdfs:Datatype","rdfs:Literal"],C=[],L=[],P=[],S="",k="",O={},N=[];r();var E=this;E.widget_type="wapi_centralWidget",E.debugger=n(3)(),E.baseNodeConstructor=n(4),E.baseLinkConstructor=n(8),E.domainNodeRangeConstructor=n(9),E.singleLinkConstructor=n(10),E.multiLinkConstructor=n(11),E.multiLinkHandlerConstructor=n(12),E.loopLinkConstructor=n(13),E.dialogBoxConstrucor=n(14);var T=n(6)();E.ontologyLoader=n(15),E.ontologyLoader.setAPIcore(E),E.parser=n(16);var F,I,D="";this.getDrawTools=function(){return T},this.getSize=function(){var e=F.split("px")[0],t=I.split("px")[0];return[parseInt(e),parseInt(t)]},E.widgetType=function(){return E.widget_type},E.log=function(e,t){E.debugger.log(e,t)},E.getCanvasAreaNode=function(){return R},E.getCanvasSvgRoot=function(){return A},E.getCanvasGraphRoot=function(){return _},E.config=n(21)(E),E.graph=n(24)(E),E.graph.coreApi(E),E.graphBGColor=function(e){return arguments.length?void E.setCanvasBgColor(e):E.config.canvas.bgColor()};var R,M,A,_,z,H=[];E.initialize=function(n,r){D=n,R=t.select("#"+n),i(R),e(),M="elements.cfg.json",a(H,M,o,r)},E.updateCanvasAreaSize=function(e,t){if(arguments.length){var n=e,r=t;"number"==typeof e&&(n=e+"px"),"number"==typeof t&&(r=t+"px"),R.style("width",n),R.style("height",r),A.attr("width",n).attr("height",r),F=A.attr("width"),I=A.attr("height")}else{var o=R.node().getBoundingClientRect();R.style("width",o.width),R.style("height",o.height),A.attr("width",o.width).attr("height",o.height)}},E.updateCanvasAreaSize=function(e,t,n,r){if(arguments.length){var o=e,i=t;"number"==typeof e&&"number"==typeof n&&(o=e+n+"px"),"number"==typeof t&&"number"==typeof r&&(i=t+r+"px");var a=R.node().parentNode;if(e.indexOf("%")!==-1){var s=e.split("%")[0]/100;if("MAIN"===a.nodeName)if(n.indexOf("%")!==-1){var l=n.split("%")[0]/100;o=window.innerWidth*s+window.innerWidth*l}else o=window.innerWidth*s+parseInt(n.split("px")[0])}if(t.indexOf("%")!==-1){var d=t.split("%")[0]/100;if("MAIN"===a.nodeName)if(r.indexOf("%")!==-1){var p=r.split("%")[0]/100;i=window.innerHeight*s+window.innerHeight*p}else i=window.innerHeight*d+parseInt(r.split("px")[0])}"number"==typeof o&&(o+="px"),"number"==typeof i&&(i+="px"),R.style("width",o),R.style("height",i),A.attr("width",o).attr("height",i)}else{var u=R.node().getBoundingClientRect();R.style("width",u.width),R.style("height",u.height),A.attr("width",u.width).attr("height",u.height)}F=A.attr("width"),I=A.attr("height")},E.setCanvasBgColor=function(e){E.config.canvas.bgColor(e),R.style("background-color",E.config.canvas.bgColor())},E.getCanvasId=function(){return D},E.getLoadedGizmoFileName=function(){return S},E.showFpsAndElementStatistic=function(e){e&&void 0===z&&(z=R.append("div"),z.style("position","absolute"),z.style("top","10px"),z.style("left","10px"),z.node().innerHTML="Hello Debuger!",E.graph.setDebugContainer(z),E.graph.showFPSAndElementStatistic(!0));var t=R.append("div");t.style("position","absolute"),t.style("top","100px"),t.style("left","0px");var n=t.append("textarea");n.node().rows="4",n.node().cols="50",n.classed("hidden",!0),E.graph.setDebugTextInput(n)},E.addMLRenderingElementToMap=function(e){N.push(e),console.log("added Element")},E.getMLRenderingMap=function(){return N},E.updateMLRenderingPositions=function(){for(var e=0;e<N.length;e++)N[e].interpolateML_Position()},E.addRenderingElementToIdMap=function(e,t){O[t]=e},E.getRenderingElementForId=function(e){return O[e]},E.testOntologyLoader=function(){E.ontologyLoader.helloLoader()},E.loadOntologyFromLocalJSON=function(e){function t(e,t){console.log("loading "+e),k=e;var n=JSON.parse(t),r=E.parser.parseOWL2VOWL(n);E.graph.setMetaInformation(r.ontologyInformation),E.graph.setViewInformation(r.viewerInformation),E.graph.setParseOntologyData(r);var o,i=r.nodes,a=r.properties;for(o=0;o<i.length;o++)E.graph.createNodeFromtNode(i[o]);for(o=0;o<a.length;o++)E.graph.createPropertyFromtProperty(a[o]);var s=r.linkMap;for(var l in s)s.hasOwnProperty(l)&&E.graph.createMultiLinkStructures(s[l]);E.graph.redraw(),E.graph.applyViewIfPresent(),console.log("Done")}N=[],O={},E.ontologyLoader.loadFromLocalJSON(e,t)},E.loadNotationFromJSONFile=function(){function e(e,t){console.log("######################"),S=e,E.elementsConfig={},l(t),console.log("FINISHED")}console.log("Loading Custom notation! from file"),E.ontologyLoader.loadNotationFromJSONFile(e)},E.loadGizmoConfig=function(e){S="defaultGizmoConfig.json",t.xhr(e,"application/json",function(t,n){return null!==t&&500===t.status?(console.log(t),void console.log("HAS AN ERROR AND A STATUS WHILE LOADING "+e)):(S=e,console.log("Loading GIZMO "+S),E.elementsConfig={},l(n.responseText),void console.log("Done"))})},E.loadGizmoConfigWithCallBack=function(e,n,r){S="defaultGizmoConfig.json",t.xhr(e,"application/json",function(t,o){return null!==t&&500===t.status?(console.log(t),void console.log("HAS AN ERROR AND A STATUS WHILE LOADING "+e)):(S=e,E.elementsConfig={},void s(o.responseText,n,r))})},E.setFunctionOnViewLoad=function(e){E.graph.viewListFunc=e},E.prefixedNameForTTLExport=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&0===t.indexOf(e[n])){var r=n,o=t.split(e[n])[1];return r+":"+o}return"<"+t+">"},this.appendViewDialog=function(){console.log("appending VIEW STUFF!"),y=new E.dialogBoxConstrucor(E),y.initialize("appendView"),y.setTitle("View Options")},this.saveSpecificationAsTTL=function(){y=new E.dialogBoxConstrucor(E),y.initialize("specification"),y.setTitle("Specification Options")},this.removeDialogBox=function(){console.log("received signal from dialogBox to remove it"),y.cleanUp(),y=void 0},this.computeIntersectionPoints=function(e,t,n){var r=0;n&&(r=n);var o={x1:e.x,y1:e.y,x2:t.x,y2:t.y},i=e.getConfigObj(),a=t.getConfigObj(),s=c(e,t);return g(o,i,e,s,r),s=c(t,e),f(o,a,t,s,r),o},this.computeExpected_IntersectionPoints=function(e,t,n){console.log("Computing Expected intersection point for Single SingleLink Elementes");var r=0;n&&(r=n);var o={x1:e.x,y1:e.y,x2:t.x,y2:t.y},i=e.getConfigObjExpected(),a=t.getConfigObjExpected(),s=c(e,t);return g(o,i,e,s,r),s=c(t,e),f(o,a,t,s,r),o},this.computeExpected_IntersectionPointsForMLP=function(e,t,n,r){console.log("Computing Expected intersection point for mL");var o=0;r&&(o=r);var i={x1:e.x,y1:e.y,x2:n.x,y2:n.y},a=e.getConfigObjExpected(),s=n.getConfigObjExpected(),l=c(e,t);return g(i,a,e,l,o),l=c(n,t),f(i,s,n,l,o),i},this.computeIntersectionPointsForMLP=function(e,t,n,r){var o=0;r&&(o=r);var i={x1:e.x,y1:e.y,x2:n.x,y2:n.y},a=e.getConfigObj(),s=n.getConfigObj(),l=c(e,t);return g(i,a,e,l,o),l=c(n,t),f(i,s,n,l,o),i},this.askForFileNameDialog=function(e){var t="suggestionFileName.view";e.indexOf(".json")&&(t=e.slice(0,e.length-5));var n=E.graph.getJSONRepresentationForView();n.push({gizmoConfigFile:S});JSON.stringify(n)},this.saveOntologyAsJSON=function(){var e=k;0===e.length&&(e="ontology.json"),e.indexOf(".json")===-1&&(e+=".json"),E.ontologyLoader.saveOntologyAsJSON(e)},this.saveViewAsFile=function(){this.askForFileNameDialog(k)},this.appendViewAsJson=function(){E.graph.appendViewAsJsonObject()};var j={};this.readDatatypeAssertionFile=function(e){t.xhr(e,"application/json",function(t,n){return null!==t&&500===t.status?(console.log(t),void console.log("HAS AN ERROR AND A STATUS WHILE LOADING "+e)):void v(n.responseText)})},this.getDatatypeAssertionMap=function(){return j},this.getHiddenExporterButton=function(){return m}};return e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t){e.exports=d3},function(e,t){e.exports=function(){var e={};return e.debugLevel=100,e.setDebugLevel=function(t){e.debugLevel=t},e.log=function(t,n){e.debugLevel>=t&&console.log(n)},e}},function(e,t,n){(function(t){var r=n(5),o=n(6)();e.exports=function(){var e=function(e){function n(e,n,r){var o=t.select("body").append("text");o.attr("id","width-test"),o.attr("style","position:absolute; float:left; white-space:nowrap; font-family:"+n+";font-size: "+r),o.text(e);var i=document.getElementById("width-test").offsetWidth;return o.remove(),i}function i(e){k=void 0;var t=window.getComputedStyle(c.node()).getPropertyValue("font-size"),r=window.getComputedStyle(c.node()).getPropertyValue("font-family"),i=parseFloat(t);if(c.text(C),"false"===m.fontSizeOverWritesShapeSize){if("circle"===m.renderingType){var a=parseInt(m.radius);v.setShapeRadius(a)}if("rect"===m.renderingType){var s=parseFloat(m.width)-10;o.cropTextToItsWidth(s,c)}if("ellipse"===m.renderingType){var s=parseFloat(m.width)-10;o.cropTextToItsWidth(s,c)}}var l=n(c.text(),r,i+"px"),d=-.5*l;c.attr("dy",.25*i+"px"),c.attr("dx",d+"px");var p=u;if(e&&(p=e),p){var f=parseInt(m.overWriteOffset);if("true"===m.fontSizeOverWritesShapeSize){var h=i+f,y=l+f,w=Math.max(.5*h,.5*y);v.setShapeRadius(w);var b=parseInt(x.inshapeIndicatorOffset),L=w+b,P=y+b,S=h+b;if("circle"===m.renderingType&&(p.attr("x",-w),p.attr("y",-w),p.attr("width",2*w),p.attr("height",2*w),p.attr("rx",w),p.attr("ry",w),g&&"inshape"===x.renderingType&&"indicator"===x.inshapeType&&(g.attr("x",-L),g.attr("y",-L),g.attr("width",2*L),g.attr("height",2*L),g.attr("rx",L),g.attr("ry",L))),"ellipse"===m.renderingType)return p.attr("x",-.5*y),p.attr("y",-.5*h),p.attr("width",y),p.attr("height",h),p.attr("rx",y),p.attr("ry",h),void(g&&"inshape"===x.renderingType&&"indicator"===x.inshapeType&&(g.attr("x",-.5*y),g.attr("y",-.5*h),g.attr("width",y),g.attr("height",h),g.attr("rx",y),g.attr("ry",h)));"rect"===m.renderingType&&(p.attr("x",-.5*y),p.attr("y",-.5*h),p.attr("width",y),p.attr("height",h),m.roundedCorner&&(p.attr("rx",m.roundedCorner[0]),p.attr("ry",m.roundedCorner[1])),g&&"inshape"===x.renderingType&&"indicator"===x.inshapeType&&(g.attr("x",-.5*P),g.attr("y",-.5*S),g.attr("width",P),g.attr("height",S),m.roundedCorner&&(g.attr("rx",m.roundedCorner[0]),g.attr("ry",m.roundedCorner[1]))))}}}function a(){s()}function s(){u.on("mouseover",v.mouseHoverIn),u.on("mouseout",v.mouseHoverOut)}function l(){L=S&&P,console.log("reEvaluateDatatypeAndLoopHandler << CALLED")}function d(e,t){u.attr("style",e);var n=c.attr("dy");if(n.indexOf("px")!==-1&&(n=n.split("px")[0]),I){var r=!F||S;F===!0&&(r=!1),F===!1&&(r=!0),S===!0&&F===!0&&(r=!0),console.log(">>> Should draw Collapsible Datatypes"),g=o.drawCollapsedDatatypes(v,p,m,x),g.classed("hidden",!r)}D&&(F===!0&&(r=!1),F===!1&&(r=!0),P===!0&&F===!0&&(r=!0),f=o.drawCollapsedLoops(v,p,m,w),f.classed("hidden",!r)),"umlStyle"!==x.renderingType&&"umlStyle"!==w.renderingType||(c.attr("dy",n+"px"),(g&&g.classed("hidden")===!1||f&&f.classed("hidden")===!1)&&o.updateTextPositionForUMLNotation(c,v,m,x))}r.apply(this,arguments);var p,u,c,g,f,h,v=this,y=!1,m=void 0,x=e.elementsConfig.collapsedDatatypes,w=e.elementsConfig.collapsedLoops,b=void 0,C=void 0,L=!1,P=!1,S=!1,k=0,O=!1,N=!1,E=void 0,T=[],F=!0,I=!1,D=!1,R="";this.are_loopCollapsed=function(){return P},this.are_dtCollapsed=function(){return S},this.getDtCollapseCFG=function(){return x},this.getLoopCollapseCFG=function(){return w},this.elementTypeConstructorName=function(e){return arguments.length?void(R=e):R},this.hasCollapsibleNodes=function(e){return arguments.length?void(I=e):I},this.hasCollapsibleLoops=function(e){return arguments.length?void(D=e):D},this.getTempCollapsionElements=function(){return T},this.isLinkElement=function(e){return arguments.length?void(N=e):N},this.setLinkElement=function(e){E=e},this.getLinkElement=function(){return E},this.handlePositionUpdateByViewer=function(n,r,o){if(!p)return void console.log("no elementSVG FOUND");var i=parseFloat(n[0]),a=parseFloat(n[1]);p.transition().tween("attr.translate",function(){return function(e){var n=t.transform(p.attr("transform"));v.x=n.translate[0],v.y=n.translate[1],v.px=v.x,v.py=v.y}}).attr("transform","translate("+i+","+a+")").each("end",function(){r&&(r(o),e.graph.interpolatePositions())})},this.handlePositionUpdateByViewerForLink=function(n,r,o){if(!p)return void console.log("no elementSVG FOUND");var i=parseFloat(n[0]),a=parseFloat(n[1]);p.transition().tween("attr.translate",function(){return function(n){var r=t.transform(p.attr("transform"));v.x=r.translate[0],v.y=r.translate[1],v.px=v.x,v.py=v.y,e.updateMLRenderingPositions(),v.isLinkElement()&&v.getLinkElement().updateDrawedPosition()}}).attr("transform","translate("+i+","+a+")").each("end",function(){r&&(r(o),e.graph.interpolatePositions())})},this.isForceNodeForProperty=function(e){return arguments.length?void(O=e):O};var M=!1;this.isNotExportable=function(e){return arguments.length?void(M=e):M},this.tNode=function(e){return arguments.length?void(h=e):h},this.defaultElementType("defaultNodeElement");var A,_=!0,z=-500;this.charge=function(e){return arguments.length?void(z=e):z},this.forceGraphRedraw=function(){e.graph.redraw()},this.getRadius=function(){return k?k:parseInt(m.radius)},this.getConfigObj=function(){return m},this.getConfigObjExpected=function(){void 0===b&&(b=this.defaultElementType());var t=e.elementsConfig[b];return void 0===t&&(t=e.elementsConfig[this.defaultElementType()]),t};var H;this.nodeObject=function(e){return arguments.length?void(A=e):A},this.visible=function(e){return arguments.length?void(_=e):_},this.setLabelText=function(e){C=e},this.getLabelText=function(){return C},this.setConfigObject=function(e){m=e},this.setConfigName=function(e){b=e},this.updateConfig=function(){void 0===b&&(b=this.defaultElementType()),m=e.elementsConfig[b],void 0===m&&(m=e.elementsConfig[this.defaultElementType()]),x=e.elementsConfig.collapsedDatatypes,w=e.elementsConfig.collapsedLoops},this.mouseEntered=function(e){return arguments.length?void(y=e):y},this.mouseHoverIn=function(){v.mouseEntered()||(v.mouseEntered(!0),p.style("cursor",m.hoverInCursor),u.style("fill",m.hoverInColor),m.strokeElement!==!0&&"true"!==m.strokeElement||u.style("stroke",m.hoverInStrokeColor),c&&(c.style("font-family",m.hoverInFontFamily),c.style("font-size",m.hoverInFontSize),c.style("fill",m.hoverInFontColor),i()),"umlStyle"!==x.renderingType&&"umlStyle"!==w.renderingType||(f&&f.classed("hidden")===!1&&g&&g.classed("hidden")===!1?console.log("Spacial Case? <<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>.."):(g&&g.classed("hidden")===!1&&o.updateTextPositionForUMLNotation(c,v,m,x),f&&f.classed("hidden")===!1&&o.updateTextPositionForUMLNotation(c,v,m,w))))},this.mouseHoverOut=function(){v.mouseEntered(!1),p.style("cursor","default"),u.style("fill",m.bgColor),m.strokeElement!==!0&&"true"!==m.strokeElement||u.style("stroke",m.strokeColor),c&&(c.style("font-family",m.fontFamily),c.style("font-size",m.fontSize),c.style("fill",m.fontColor),i()),"umlStyle"!==x.renderingType&&"umlStyle"!==w.renderingType||(f&&f.classed("hidden")===!1&&g&&g.classed("hidden")===!1?console.log("Spacial Case? <<<<<<<<<<<<<<<<<<<<>>>>>>>>>>>>>>>>>.."):(g&&g.classed("hidden")===!1&&o.updateTextPositionForUMLNotation(c,v,m,x),f&&f.classed("hidden")===!1&&o.updateTextPositionForUMLNotation(c,v,m,w)))},this.setPosition=function(e,t){this.x=e,this.y=t},this.getPosition=function(){return[v.x,v.y]},this.updateDrawedPosition=function(){p.attr("transform","translate("+this.x+","+this.y+")")},this.computeRequiredWidth=function(){var e=window.getComputedStyle(c.node()).getPropertyValue("font-size"),t=window.getComputedStyle(c.node()).getPropertyValue("font-family"),r=parseFloat(e),o=n(C,t,r+"px"),i=parseInt(m.overWriteOffset),a=0;return"true"===m.fontSizeOverWritesShapeSize&&(a=o+i),"false"===m.fontSizeOverWritesShapeSize&&("circle"===m.renderingType&&(a=parseInt(m.width)),"rect"!==m.renderingType&&"ellipse"!==m.renderingType||(a=parseInt(m.width))),a},this.drawLabelText=function(e,t){return C?(c=e.append("text").text(C),c.style("font-family",t.fontFamily),c.style("font-size",t.fontSize),c.style("fill",t.fontColor),i(),c.style("pointer-events","none"),c):null},this.getShapeRadius=function(){return k},this.setShapeRadius=function(e){k=e},this.getExpectedShapeSize=function(){var e={},t=v.getConfigObjExpected();if("true"===t.fontSizeOverWritesShapeSize){var r=p.append("text").text(C);r.style("font-family",t.fontFamily),r.style("font-size",t.fontSize),r.style("fill",t.fontColor);var o=window.getComputedStyle(r.node()).getPropertyValue("font-size"),i=window.getComputedStyle(r.node()).getPropertyValue("font-family"),a=parseFloat(o),s=n(C,i,a+"px"),l=a+parseInt(t.overWriteOffset),d=s+parseInt(t.overWriteOffset),u=Math.max(.5*l,.5*d);r.remove(),e={r:u,w:d,h:l}}else e={r:parseInt(m.radius),w:parseInt(m.width),h:parseInt(m.height)};return e},this.getExpectedShapeRadius=function(){var e=0;if("true"===m.fontSizeOverWritesShapeSize){var t=window.getComputedStyle(c.node()).getPropertyValue("font-size"),r=window.getComputedStyle(c.node()).getPropertyValue("font-family"),o=parseFloat(t),i=n(C,r,o+"px"),a=o,s=i+parseInt(m.overWriteOffset);e=Math.max(.5*a,.5*s)}else e=m.radius;return parseInt(e)},v.computeUMLElementSize=function(){var e=m.fontSize,t=e.split("px")[0],r=m.fontFamily,o=n(C,r,t+"px"),i=parseInt(m.overWriteOffset);if("rect"===m.renderingType){if("true"===m.fontSizeOverWritesShapeSize){var a=parseInt(t)+i,s=parseInt(o)+i;return{w:s,h:a}}return{w:parseInt(m.width),h:m.height}}},this.gerRenderingTextElement=function(){return c},this.draw=function(e){p=e,u=o.drawElement(p,m,v),c=v.drawLabelText(p,m);var t=c.attr("dy");if(t.indexOf("px")!==-1&&(t=t.split("px")[0]),I===!0&&D===!1){var n=!F||S;F===!0&&(n=!1),F===!1&&(n=!0),S===!0&&F===!0&&(n=!0),g=o.drawCollapsedDatatypes(v,p,m,x),g.classed("hidden",!n)}D===!0&&I===!1&&(F===!0&&(n=!1),F===!1&&(n=!0),P===!0&&F===!0&&(n=!0),f=o.drawCollapsedLoops(v,p,m,w),f.classed("hidden",!n)),D===!1&&D===!1&&console.log("NOTHING TO RENDER "),D===!0&&D===!0&&(console.log("RENDER ALL ELEMENTS"),o.drawAllCollapsedEllements(v,p,m,x,w)),u.attr("r")&&(k=u.attr("r")),a(),H&&(u.on("dblclick",H),c.on("dblclick",H),g&&g.on("dblclick",H),f&&f.on("dblclick",H))},this.adjustShapeSize=function(e,t,n){u&&("circle"===m.renderingType&&(u.attr("x",-e),u.attr("y",-e),u.attr("width",2*e),u.attr("height",2*e),u.attr("rx",e),u.attr("ry",e),v.setShapeRadius(e)),"rect"===m.renderingType&&(u.attr("x",-.5*t),u.attr("y",-.5*n),u.attr("width",t),u.attr("height",n),console.log("<<<<<<<<<<<<UPDATE SHAPE SIZE TO"+t+"  "+n),v.setShapeRadius(void 0)))},this.getRenderingShape=function(){return u},this.getRenderingTextElement=function(){return c},this.connectDoubleClickAction=function(e){H=e},this.handleDatatypeAndLoops=function(){return e.graph.ignoreEvents(),console.log("handling datatype and loop collapse:"+I+"  "+D),I===!1&&D===!1?void console.log("nothing to do here"):(console.log("Inside Node wants to callapse datatypes and loops;"),L=!L,P=L,S=L,void A.showLoopsAndDatatype(!L))},this.setTemporalCollapsedElements=function(e){T=e},this.collapseTempElements=function(t,n){F=t?!t:!F,console.log("Elements should be Visible? "+F);for(var r=0;r<T.length;r++){var o=T[r];o.domain()===o.range()?(o.visible(F),P=!F):(o.visible(F),S=!F,o.range().visible(F))}n===!0&&e.graph.redraw()},this.collapseDatatypes=function(e){console.log("calling collapse DATATYPES"),S=!0,g&&g.classed("hidden",!S),A.showDatatype(!S,e),console.log("elements Collapsed Datatypes"),l()},this.expandDatatypes=function(e){S=!1,g&&g.classed("hidden",!S),console.log("elements Expanded Datatypes BEFORE"),A.showDatatype(!S,e),console.log("elements Expanded Datatypes AFTER"),l()},this.collapseLoops=function(e){P=!0,f&&f.classed("hidden",!P),A.showLoops(!P,e),l()},this.expandLoops=function(e){P=!1,f&&f.classed("hidden",!P),A.showLoops(!P,e),l()},this.smartExpanding=function(e){},this.handleGizmoRepresentationChanges=function(){if(void 0!==u){f&&f.remove(f),g&&g.remove(g),v.updateConfig();var e=t.select(document.createElement("g")),n=o.drawElement(e,m,v);i(n),u.transition().duration(300).attr("x",n.attr("x")).attr("y",n.attr("y")).attr("width",n.attr("width")).attr("height",n.attr("height")).attr("rx",n.attr("rx")).attr("ry",n.attr("ry")).attr("fill",n.attr("fill")).attr("style",n.attr("style")).each("end",function(){i(),d(n.attr("style"),n.attr("fill")),c.style("font-family",m.fontFamily),c.style("font-size",m.fontSize),c.style("fill",m.fontColor),s(),n.remove(),e.remove(),e=null,n=null})}}};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t){var n=0;e.exports=function(){var e=function(e){var t,r,o,i,a,s,l=this,d=e,p=e.getCanvasId()+"_"+n++;this.locked=function(e){return arguments.length?(o=e,l):o},this.frozen=function(e){return arguments.length?(i=e,l):i},this.ignoreForce=function(e){l.locked(e),l.frozen(e)},this.id=function(e){return arguments.length?void(p=e):p},this.label=function(e){return arguments.length?void(t=e):t},this.type=function(e){return arguments.length?void(r=e):r},this.configuration=function(e){return arguments.length?void(a=e):a},this.wapi=function(){return d},this.defaultElementType=function(e){return arguments.length?void(s=e):s}};return e.prototype.constructor=e,e.prototype.equals=function(t){return t instanceof e&&this.id()===t.id()},e}()},function(e,t,n){var r=n(7)();e.exports=function(e){function t(e,t){var n=e.append("line"),r=t.getRenderingShape().attr("x"),o=t.getRenderingShape().attr("y"),i=t.getRenderingShape().attr("width"),a=(t.getRenderingShape().attr("height"),t.getRenderingTextElement()),s=window.getComputedStyle(a.node()).getPropertyValue("font-size"),l=parseFloat(s),d=parseFloat(o)+8+l,p=parseFloat(r)+parseFloat(i);n.attr("x1",r).attr("y1",d).attr("x2",p).attr("y2",d),n.style("stroke","black")}var n={};return n.cropTextToItsWidth=function(e,t){r.cropText(e,t)},n.getHelper=function(){return r},n.computeRequiredShapeSize=function(e,t,n,r,o){var i=(window.getComputedStyle(e.node()).getPropertyValue("font-family"),window.getComputedStyle(e.node()).getPropertyValue("font-size")),a=(parseFloat(i),e.attr("dy"));a.indexOf("px")!==-1&&(a=a.split("px")[0]);var s=n.renderingType;"rect"===s&&console.log(">>>>>>>>>>>>>TODO <<<<<<<< Combined rendering Elements")},n.drawAllCollapsedEllements=function(e,t,n,r,o){var i;return"none"===r.renderingType&&"none"===o.renderingType?i=t.append("rect"):(i=t.append("rect"),i.attr("id",e.id()+"collapsedDTAndLoopShape"),i)},n.drawCollapsedLoops=function(e,o,i,a){var s;if("none"===a.renderingType)return s=o.append("rect");if("inshape"===a.renderingType&&("indicator"===a.inshapeType&&(s=o.append("rect"),r.applyIndicatorShapeParameter(s,e,i,a)),"segment"===a.inshapeType&&(s=o.append("g"),r.applySegmentShapeParameterForLoops(s,e,i,a,"loopElement"))),"umlStyle"===a.renderingType){s=o.append("g");var l=e.gerRenderingTextElement(),d=n.updateTextPositionForUMLNotation(l,e,e.getConfigObj(),a);r.drawUMLElementsForLoops(d,s,e,e.getConfigObj(),a),"true"===a.umlDrawHeaderLine&&t(s,e)}return s.attr("id",e.id()+"collapsedLoopShape"),s},n.drawCollapsedDatatypes=function(e,o,i,a){var s;if("none"===a.renderingType)return s=o.append("rect");if("inshape"===a.renderingType&&("indicator"===a.inshapeType&&(s=o.append("rect"),r.applyIndicatorShapeParameter(s,e,i,a)),"segment"===a.inshapeType&&(s=o.append("g"),r.applySegmentShapeParameterForDatatypes(s,e,i,a,"dtType"))),"umlStyle"===a.renderingType){s=o.append("g");var l=e.gerRenderingTextElement(),d=n.updateTextPositionForUMLNotation(l,e,e.getConfigObj(),a);r.drawUMLElementsForDatatypes(d,s,e,e.getConfigObj(),a),"true"===a.umlDrawHeaderLine&&t(s,e)}return s.attr("id",e.id()+"collapsedDataShape"),s},n.drawElement=function(e,t,n){var r,o,i,a=e.append("rect");if(n){var s=n.getExpectedShapeSize();r=s.r,o=s.w,i=s.h}else r=parseInt(t.radius),o=parseInt(t.width),i=parseInt(t.height);return"circle"===t.renderingType&&(a.attr("x",-r),a.attr("y",-r),a.attr("width",2*r),a.attr("height",2*r),a.attr("rx",r),a.attr("ry",r)),"rect"===t.renderingType&&(a.attr("x",-.5*o),a.attr("y",-.5*i),a.attr("width",o),a.attr("height",i),t.roundedCorner&&(a.attr("rx",parseFloat(t.roundedCorner[0])),a.attr("ry",parseFloat(t.roundedCorner[1])))),"ellipse"===t.renderingType&&(a.attr("x",-.5*o),a.attr("y",-.5*i),a.attr("width",o),a.attr("height",i),a.attr("rx",o),a.attr("ry",i)),a.attr("fill",t.bgColor),t.strokeElement!==!0&&"true"!==t.strokeElement||(a.style("stroke",t.strokeColor),a.style("stroke-width",t.strokeWidth),"solid"!==t.strokeStyle&&("dashed"===t.strokeStyle&&a.style("stroke-dasharray",8),"dotted"===t.strokeStyle&&a.style("stroke-dasharray",3))),a},n.drawLinkElement=function(e,t){var n;return t.link_strokeWidth?(n=e.append(t.link_renderingType),n.style("stroke",t.link_strokeColor),n.style("stroke-width",t.link_strokeWidth),n.style("stroke-width",t.link_strokeWidth),"solid"!==t.link_strokeStyle&&("dashed"===t.link_strokeStyle&&n.style("stroke-dasharray",8),"dotted"===t.link_strokeStyle&&n.style("stroke-dasharray",3))):(n=e.append("line"),n.style("stroke","#000"),n.style("stroke-width","2px")),n},n.drawArcLinkElement=function(e,t){var n;return t.link_strokeWidth?(n=e.append("path"),n.style("stroke",t.link_strokeColor),n.style("stroke-width",t.link_strokeWidth),"solid"!==t.link_strokeStyle&&("dashed"===t.link_strokeStyle&&n.style("stroke-dasharray",8),"dotted"===t.link_strokeStyle&&n.style("stroke-dasharray",3))):(n=e.append("path"),n.style("stroke","#000"),n.style("stroke-width","2px")),n.style("fill","none"),n},n.drawArrowHead=function(e,t,n,r){if("true"===r.link_arrowHead){var o,i,a,s,l=r.link_arrowHead_scaleFactor;o=l*-14,i=l*-10,a=28*l,s=20*l;var d=o+" "+i+" "+a+" "+s,p=t.append("marker").attr("id",n).attr("viewBox",d).attr("markerWidth",10*l).attr("markerHeight",10*l).attr("orient","auto");e.attr("marker-end","url(#"+n+")");var u=-12*l,c=8*l,g=-12*l,f=-8*l,h=p.append("path");return h.attr("d","M0,0L "+u+","+c+"L"+g+","+f+"L0,0"),h.style("stroke",r.link_arrowHead_strokeColor),h.style("stroke-width",r.link_arrowHead_strokeWidth),h.style("fill",r.link_arrowHead_fillColor),"solid"!==r.link_arrowHead_strokeStyle&&("dashed"===r.link_arrowHead_strokeStyle&&h.style("stroke-dasharray",8),"dotted"===r.link_arrowHead_strokeStyle&&h.style("stroke-dasharray",3)),[p,h]}},n.drawArrowTail=function(e,t,n){},n.updateTextPositionForUMLNotation=function(e,t,n,o){return r.reEvaulateUMLStylePositions(e,t,n,o)},n}},function(e,t,n){(function(t){e.exports=function(e){function n(e,t,n,r,o,i){var s,l,p,u,c,g,f,h,v=0,y=8,m=360,x=0,w=1,b=1,C=1,L=n.getExpectedShapeRadius(),P=o.segmentStartAngle;o.segmentHeight&&(y=o.segmentHeight),o.segmentOffset&&(L+=o.segmentOffset);var S=L-v,k=L-y-v;if(0===e.length)return t;"full"==o.segmentType&&(m=360),"half"==o.segmentType&&(m=180),"quarter"==o.segmentType&&(m=90);var O=-m/e.length,N="0";1===e.length&&"full"==o.segmentType&&(N="1");for(var E=0;E<e.length;E++){var T=t.append("path"),F=a(P+E*O),I=a(P+(E+1)*O);x=F.x,w=F.y,b=I.x,C=I.y,s=x*k,l=w*k,p=x*S,u=w*S,c=b*S,g=C*S,f=b*k,h=C*k,T.attr("d","M"+s+" "+l+"L"+p+" "+u+"A"+S+" "+S+", 0, "+N+", 1, "+c+" "+g+"L"+f+" "+h+"A"+k+" "+k+", 0, "+N+", 0, "+s+" "+l+"Z");var D=e[E].getPropertyNode().getConfigObj().bgColor;T.style("fill",D),T.style("stroke","#000000"),T.style("stroke-width","0.5px");var R=e[E].getPropertyNode().getLabelText();if("owl:ObjectProperty"===e[E].getPropertyNode().elementTypeConstructorName()||(R+="\n"+e[E].range().getLabelText()),T.append("title").text(R),"true"===o.showLabelInSegment){var M=t.append("path");
M.attr("fill","none");var A=p-s,_=u-l,z=c-f,H=g-h,j=Math.sqrt(A*A+_*_),V=Math.sqrt(z*z+H*H),W=A/j,J=_/j,G=z/V,U=H/V,B=s+.5*(p-s)-.35*o.segmentLabelSize*W,q=l+.5*(u-l)-.35*o.segmentLabelSize*J,Z=f+.5*(c-f)-.35*o.segmentLabelSize*G,X=h+.5*(g-h)-.35*o.segmentLabelSize*U,Y=Math.sqrt(B*B+q*q);M.attr("d","M"+B+" "+q+"A"+Y+" "+Y+", 0, "+N+", 1, "+Z+" "+X),M.node().id=n.id()+"_"+i+"_segment_id"+E;var K=t.append("text");K.style("font-size",o.segmentLabelSize+"px"),K.style("text-anchor","middle");var Q=K.append("textPath");Q.attr("xlink:href","#"+M.node().id),Q.attr("startOffset","50%"),Q.text(e[E].getPropertyNode().getLabelText()),Q.node().id=n.id()+"_txtNodeId"+E,d.computeCropedText(M,Q,o.segmentAdjustmentMargin)}}}function r(e,t,n,r,o,a,s,l){var p=i(n,o,a,s,l),u=parseInt(l.umlHeightOffset),c=parseFloat(p.attr("height"));0===e&&(t+=.5*c);var g=e*(u+c),f=t+g;a.attr("transform","translate("+r+","+f+")");var h=o.getLabelText(),v=a.append("text").text(h);v.style("font-family",s.fontFamily);var y=s.fontSize;y=y.split("px")[0],y=parseFloat(y),y*=parseFloat(l.umlElementScaleFactor),v.style("font-size",y+"px"),v.style("fill",s.fontColor),v.style("pointer-events","none");var m=parseFloat(p.attr("width"))-2;d.cropText(m,v);var x=d.measureTextWidth(v.text(),s.fontFamily,y+"px"),w=-.5*x;return"left"===l.umlPropertyAlign&&(w=-.5*n+2),"right"===l.umlPropertyAlign&&(w=.5*n-x-2),v.attr("dy",.25*y+"px"),console.log("renderingText element dx="+w),v.attr("dx",w+"px"),t}function o(e,t,n,r,o,a,s,l){var p=i(n,o,a,s,l),u=parseInt(l.umlHeightOffset),c=parseFloat(p.attr("height"));0===e&&(t+=.5*c);var g=e*(u+c),f=t+g;a.attr("transform","translate("+r+","+f+")");var h=o.getLabelText(),v=a.append("text").text(h);v.style("font-family",s.fontFamily);var y=s.fontSize;y=y.split("px")[0],y=parseFloat(y),y*=parseFloat(l.umlElementScaleFactor),v.style("font-size",y+"px"),v.style("fill",s.fontColor),v.style("pointer-events","none");var m=parseFloat(p.attr("width"))-2;d.cropText(m,v);var x=d.measureTextWidth(v.text(),s.fontFamily,y+"px"),w=-.5*x;return"left"===l.umlPropertyAlign&&(w=-.5*n+2),"right"===l.umlPropertyAlign&&(w=.5*n-x-2),v.attr("dy",.25*y+"px"),v.attr("dx",w+"px"),t}function i(e,t,n,r,o){var i=n.append("rect"),a=parseFloat(o.umlElementScaleFactor),s=t.computeUMLElementSize(),l=s.w,d=s.h,p=r.radius*a,u=parseFloat(l)*a,c=parseFloat(d)*a;return e&&(u=e),"circle"===r.renderingType&&(i.attr("x",-p),i.attr("y",-p),i.attr("width",2*p),i.attr("height",2*p),i.attr("rx",p),i.attr("ry",p)),"rect"===r.renderingType&&(i.attr("x",-.5*u),i.attr("y",-.5*c),i.attr("width",u),i.attr("height",c),r.roundedCorner&&(i.attr("rx",r.roundedCorner[0]*a),i.attr("ry",r.roundedCorner[1]*a))),"ellipse"===r.renderingType&&(i.attr("x",-.5*u),i.attr("y",-.5*c),i.attr("width",u),i.attr("height",c),i.attr("rx",u),i.attr("ry",c)),i.attr("fill",r.bgColor),r.strokeElement!==!0&&"true"!==r.strokeElement||(i.style("stroke",r.strokeColor),i.style("stroke-width",r.strokeWidth),"solid"!==r.strokeStyle&&("dashed"===r.strokeStyle&&i.style("stroke-dasharray",8),"dotted"===r.strokeStyle&&i.style("stroke-dasharray",3))),i}function a(e){var t=Math.cos(e*Math.PI/180),n=Math.sin(e*Math.PI/180);return{x:t,y:-n}}function s(e){var t=e.getTempCollapsionElements();if(0!==t.length||!e.tNode()){var n,r=[];for(n=0;n<t.length;n++)t[n].domain()!==t[n].range()&&r.push(t[n]);return r}var o=e.tNode().getDatatypeProperties();t=[];for(var i=0;i<o.length;i++)t.push(o[i].getRenderingPrimitive());return t}function l(e){var t,n=[],r=e.getTempCollapsionElements();if(0!==r.length||!e.tNode()){for(t=0;t<r.length;t++)r[t].domain()===r[t].range()&&n.push(r[t]);return n}var o=e.tNode().getLoopProperties();for(r=[],t=0;t<o.length;t++)r.push(o[t].getRenderingPrimitive());return r}var d={};return d.cropText=function(e,t){for(var n=t.text(),r=1,o=window.getComputedStyle(t.node()).getPropertyValue("font-size"),i=window.getComputedStyle(t.node()).getPropertyValue("font-family"),a=parseFloat(o),s=n,l=d.measureTextWidth(n,i,a+"px");l>e;){if(s=n.slice(0,n.length-r)+"...",t.text(s),r++,r>n.length){s=".",t.text(s);break}l=d.measureTextWidth(s,i,a+"px")}},d.measureTextWidth=function(e,n,r){var o=t.select("body").append("text");o.attr("id","width-test"),o.attr("style","position:absolute; float:left; white-space:nowrap; font-family:"+n+";font-size: "+r),o.text(e);var i=document.getElementById("width-test").offsetWidth;return o.remove(),i},d.computeCropedText=function(e,t,n){for(var r=t.text(),o=1,i=t.node(),a=e.node(),s=window.getComputedStyle(i.parentNode).getPropertyValue("font-size"),l=window.getComputedStyle(i.parentNode).getPropertyValue("font-family"),p=parseFloat(s),u=r,c=a.getTotalLength(),g=d.measureTextWidth(r,l,p+"px")+n;g>c;){if(u=r.slice(0,r.length-o)+"...",t.text(u),o++,o>r.length){u=".",t.text(u);break}g=d.measureTextWidth(u,l,p+"px")+n}},d.applyIndicatorShapeParameter=function(e,t,n,r){var o=parseInt(r.inshapeIndicatorOffset),i=parseInt(n.width),a=parseInt(n.height),s=t.getExpectedShapeSize();"true"===n.fontSizeOverWritesShapeSize&&(i=s.w,a=s.h);var l=i+o,d=a+o;if("circle"===n.renderingType){var p=s.r,u=p+o;e.attr("x",-u),e.attr("y",-u),e.attr("width",2*u),e.attr("height",2*u),e.attr("rx",u),e.attr("ry",u)}if("rect"===n.renderingType&&(e.attr("x",-.5*l),e.attr("y",-.5*d),e.attr("width",l),e.attr("height",d),n.roundedCorner&&(e.attr("rx",n.roundedCorner[0]),e.attr("ry",n.roundedCorner[1]))),"ellipse"===n.renderingType){e.attr("x",-.5*l),e.attr("y",-.5*d),e.attr("width",l),e.attr("height",d),e.attr("rx",l),e.attr("ry",d)}e.attr("fill","none"),e.style("stroke",r.inshapeStrokeColor),e.style("stroke-width",r.inshapeStrokeStrokeWidth),"solid"!==r.inshapeStrokeType&&("dashed"===r.inshapeStrokeType&&e.style("stroke-dasharray",8),"dotted"===r.inshapeStrokeType&&e.style("stroke-dasharray",3))},d.applySegmentShapeParameterForDatatypes=function(e,t,r,o,i){var a=s(t);"circle"===r.renderingType&&n(a,e,t,r,o,i)},d.applySegmentShapeParameterForLoops=function(e,t,r,o,i){var a=l(t);"circle"===r.renderingType&&n(a,e,t,r,o,i)},d.reEvaulateUMLStylePositions=function(e,t,n,r){var o=window.getComputedStyle(e.node()).getPropertyValue("font-family"),i=window.getComputedStyle(e.node()).getPropertyValue("font-size"),a=parseFloat(i),p=e.attr("dy");p.indexOf("px")!==-1&&(p=p.split("px")[0]);var u,c=n.renderingType;if("circle"===c&&"header"===r.umlShapeAdjustsShapeSize){var g=t.getShapeRadius();u=p-g+a,e.attr("dy",u+"px");var f=.5*d.measureTextWidth(e.text(),o,a+"px"),h=u-a,v=Math.sqrt(h*h+f*f);t.adjustShapeSize(v)}if("rect"===c){if("header"===r.umlShapeAdjustsShapeSize){var y,m=t.getRenderingShape(),x=s(t),w=l(t),b=parseFloat(r.umlElementScaleFactor),C=parseInt(a)+3,L=t.computeRequiredWidth();for(y=0;y<x.length;y++){var P=x[y].getPropertyNode().computeUMLElementSize(),S=b*P.w,k=b*P.h;C+=k+parseInt(r.umlHeightOffset),L=Math.max(L,S)}for(y=0;y<w.length;y++){var P=w[y].getPropertyNode().computeUMLElementSize(),S=b*P.w,k=b*P.h;C+=k+parseInt(r.umlHeightOffset),L=Math.max(L,S)}var O=t.computeRequiredWidth();C+=parseInt(r.umlOffsetToHeader),C+=parseInt(r.umlOffsetToAfterLastElement),console.log(">>>>>>>>> computed required Height?"+C),console.log(">>>>>>>>> parentNode.are_dtCollapsed()"+t.are_dtCollapsed()),console.log(">>>>>>>>> parentNode.are_loopCollapsed()?"+t.are_loopCollapsed()),t.are_dtCollapsed()!==!0&&t.are_loopCollapsed()!==!0||(console.log("This should do it!"+C),t.adjustShapeSize(void 0,O,C));var N=parseFloat(m.attr("height"));return u=p-.5*N+a,e.attr("dy",u+"px"),O-=parseFloat(r.umlMarginLeft),O-=parseFloat(r.umlMarginRight),console.log("allowedWidth"+O),O}if("datatypes"===r.umlShapeAdjustsShapeSize){var y,m=t.getRenderingShape(),x=s(t),w=l(t),b=parseFloat(r.umlElementScaleFactor),C=parseInt(a)+3,L=t.computeRequiredWidth();for(y=0;y<w.length;y++){var P=w[y].getPropertyNode().computeUMLElementSize(),S=b*P.w,k=b*P.h;C+=k+parseInt(r.umlHeightOffset)}for(y=0;y<x.length;y++){var P=x[y].getPropertyNode().computeUMLElementSize(),S=b*P.w,k=b*P.h;C+=k+parseInt(r.umlHeightOffset),S+=parseFloat(r.umlMarginLeft)+parseFloat(r.umlMarginBetween),L=Math.max(L,S),console.log("Width for property:"+x[y].getPropertyNode().getLabelText()+" is "+S);var E=x[y].range().computeUMLElementSize(),T=b*E.w;b*E.h;L=Math.max(L,T)}var O=t.computeRequiredWidth();O=2*Math.max(O,L),C+=parseInt(r.umlOffsetToHeader),C+=parseInt(r.umlOffsetToAfterLastElement),console.log(">>>>>>>>> computed required Height?"+C),t.are_dtCollapsed()!==!0&&t.are_loopCollapsed()!==!0||t.adjustShapeSize(void 0,O,C);var N=m.attr("height"),f=.5*d.measureTextWidth(e.text(),o,a+"px");u=p-.5*N+a;var F;return"left"===r.umlHeaderAlign&&(F=-.5*O+parseFloat(r.umlMarginLeft)),"right"===r.umlHeaderAlign&&(F=.5*O-2*f-parseFloat(r.umlMarginRight)),"center"===r.umlHeaderAlign&&(F=-f),e.attr("dy",u+"px"),e.attr("dx",F+"px"),console.log("updated text position X "+F),O-=parseFloat(r.umlMarginLeft),O-=parseFloat(r.umlMarginRight),console.log("allowedWidth"+O),O}if("loops"===r.umlShapeAdjustsShapeSize){var y,m=t.getRenderingShape(),x=s(t),w=l(t),b=parseFloat(r.umlElementScaleFactor),C=parseInt(a)+3,L=t.computeRequiredWidth();for(y=0;y<w.length;y++){var P=w[y].getPropertyNode().computeUMLElementSize(),S=b*P.w,k=b*P.h;C+=k+parseInt(r.umlHeightOffset),S+=parseFloat(r.umlMarginLeft)+parseFloat(r.umlMarginBetween),L=Math.max(L,S),console.log("Width for property:"+w[y].getPropertyNode().getLabelText()+" is "+S)}var O=t.computeRequiredWidth();O=Math.max(O,L),console.log("Loops compute allowed width"+O),C+=parseInt(r.umlOffsetToHeader),C+=parseInt(r.umlOffsetToAfterLastElement),console.log(">>>>>>>>> computed required Height?"+C),t.are_dtCollapsed()!==!0&&t.are_loopCollapsed()!==!0||t.adjustShapeSize(void 0,O,C);var N=m.attr("height"),f=.5*d.measureTextWidth(e.text(),o,a+"px");u=p-.5*N+a;var F;return"left"===r.umlHeaderAlign&&(F=-.5*O+parseFloat(r.umlMarginLeft)),"right"===r.umlHeaderAlign&&(F=.5*O-2*f-parseFloat(r.umlMarginRight)),"center"===r.umlHeaderAlign&&(F=-f),e.attr("dy",u+"px"),e.attr("dx",F+"px"),console.log("updated text position X "+F),O-=parseFloat(r.umlMarginLeft),O-=parseFloat(r.umlMarginRight),console.log("allowedWidth"+O),O}}},d.drawUMLElementsForLoops=function(e,t,n,r,i){var a,d=s(n),p=l(n),u=n.getRenderingShape().attr("height"),c=r.fontSize;c=parseFloat(c.split("px")[0]);var g=-.5*parseFloat(u)+c+parseInt(i.umlOffsetToHeader),f=n.getDtCollapseCFG(),h=0;if("header"===i.umlShapeAdjustsShapeSize){var v=parseFloat(f.umlElementScaleFactor);for(a=0;a<d.length;a++){var y=d[a].getPropertyNode().computeUMLElementSize(),m=v*y.h;h+=m+parseInt(f.umlHeightOffset)}}if("loops"===i.umlShapeAdjustsShapeSize){var v=parseFloat(f.umlElementScaleFactor);for(a=0;a<d.length;a++){var y=d[a].getPropertyNode().computeUMLElementSize(),m=v*y.h;h+=m+parseInt(f.umlHeightOffset)}}for(g+=h,a=0;a<p.length;a++){var x=p[a],w=x.getPropertyNode().getConfigObj(),b=t.append("g"),C=0,L=0,P=e-L;g=o(a,g,P,C,x.getPropertyNode(),b,w,i)}},d.drawUMLElementsForDatatypes=function(e,t,n,o,i){var a,d=s(n),p=(l(n),n.getRenderingShape().attr("height"));console.log("Found rendering height?"+p),console.log("The Width for the parentElement? "+e);var u=o.fontSize;u=parseFloat(u.split("px")[0]);var c=-.5*parseFloat(p)+u+parseInt(i.umlOffsetToHeader);for(console.log("StartElement position:"+c),a=0;a<d.length;a++){var g=d[a],f=g.getPropertyNode().getConfigObj(),h=g.range().getConfigObj(),v=t.append("g"),y=t.append("g"),m=1,x=0,w=0,b=0;if("true"===i.umlShowDatatypeProperty&&(m=.5,b=parseFloat(i.umlMarginBetween),x=-.25*e-b,w=.25*e+b),"true"===i.umlShowDatatypeProperty){var C=.5*e-.5*b;console.log(">>>> element Width for a property"+C);var L=c;c=r(a,c,C,x,g.getPropertyNode(),v,f,i),r(a,L,C,w,g.range(),y,h,i)}else{var C=e-b;console.log(">>>> element Width for a property"+C);var L=c;c=r(a,c,C,x,g.getPropertyNode(),v,f,i)}}},d.getCollapsedLoopProperties=function(e){return l(e)},d}}).call(t,n(2))},function(e,t,n){var r=n(5),o=n(6)();e.exports=function(){var e=function(e){function t(){n()}function n(){a.on("mouseover",g.mouseHoverIn),a.on("mouseout",g.mouseHoverOut)}r.apply(this,arguments);var i,a,s,l,d,p,u,c,g=this,f=!1,h=void 0,v=!0;this.propertyObject=function(e){return arguments.length?void(c=e):c},this.visible=function(e){return arguments.length?void(v=e):v},this.domain=function(e){return arguments.length?void(l=e):l},this.range=function(e){return arguments.length?void(d=e):d},this.setConfigObject=function(e){h=e},this.mouseEntered=function(e){return arguments.length?void(f=e):f},this.mouseHoverIn=function(){g.mouseEntered()||g.mouseEntered(!0)},this.mouseHoverOut=function(){g.mouseEntered(!1)},this.updateDrawedPosition=function(){a&&l&&d&&a.attr("x1",l.x).attr("y1",l.y).attr("x2",d.x).attr("y2",d.y)},this.getForceLink=function(){return[{source:g.domain(),target:g.range()}]},this.draw=function(e,n){i=e,a=o.drawLinkElement(i,h),u=o.drawArrowHead(i,n,g.id()+"_arrowHead",h),t()},this.setLabelText=function(e){p=e},this.drawLabelText=function(e){if(p){s=e.append("text").text(p);var t=s.node().getBoundingClientRect().height,n=s.node().getBoundingClientRect().width;return s.attr("dy",.25*t+"px"),s.attr("dx",-.5*n+"px"),s.style("pointer-events","none"),s}return null},this.getPropertyNode=function(){},this.handlePositionUpdateByViewer=function(e,t,n){var r=g.getPropertyNode();r.handlePositionUpdateByViewerForLink(e,t,n)}};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()},function(e,t,n){var r=n(5),o=n(6)(),i=n(4);e.exports=function(){var e=function(e){r.apply(this,arguments),console.log("creating that dnr NODE >>>>>>>>>>>>>>>>>>>");var t,n,a=this,s=!1,l="hello",d=void 0,p=void 0;this.setPropertyNode=function(e){p=e},this.setLabelText=function(e){l=e};var u,c;this.domain=function(e){return arguments.length?void(u=e):u},this.range=function(e){return arguments.length?void(c=e):c},this.setConfigObject=function(e){d=e},this.mouseEntered=function(e){return arguments.length?void(s=e):s},this.createForceNode=function(t){return a.setLabelText(t),p=new i(e),p.setConfigObject(e.elementsConfig.objectProperty),p.x=0,p.y=0,console.log("created propertyNode!!!"),console.log(p),p},this.mouseHoverIn=function(){a.mouseEntered()||a.mouseEntered(!0)},this.mouseHoverOut=function(){a.mouseEntered(!1)},this.updateDrawedPosition=function(){n.attr("x1",u.x).attr("y1",u.y).attr("x2",c.x).attr("y2",c.y)},this.getForceLink=function(){return[{source:a.domain(),target:p},{source:p,target:a.range()}]},this.draw=function(e){t=e,n=o.drawLinkElement(t,d)}};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()},function(e,t,n){(function(t){var r=n(8),o=n(6)(),i=n(4);e.exports=function(){var e=function(e){r.apply(this,arguments);var n,a,s,l,d,p,u,c=this,g=!1,f="hello",h=void 0,v=void 0,y=!0,m=300;this.linkDistance=function(e){return arguments.length?void(m=e):m};var x=.8;this.linkStrength=function(e){return arguments.length?void(x=e):x},this.propertyObject=function(e){return arguments.length?void(l=e):l},this.visible=function(e){return arguments.length?(y=e,void(v&&v.visible(e))):y},this.drawLabelText=function(e){if(f){s=e.append("text").text(f);var t=s.node().getBoundingClientRect().height,n=s.node().getBoundingClientRect().width;return s.attr("dy",.25*t+"px"),s.attr("dx",-.5*n+"px"),s.style("pointer-events","none"),s}return null},this.setPropertyNode=function(e){v=e},this.getPropertyNode=function(){return v},this.setLabelText=function(e){f=e};var w,b;this.domain=function(e){return arguments.length?void(w=e):w},this.range=function(e){return arguments.length?void(b=e):b},this.setConfigObject=function(e){h=e},this.mouseEntered=function(e){return arguments.length?void(g=e):g},this.setConfigName=function(e){d=e},this.updateConfig=function(){h=e.elementsConfig[d],void 0===h&&(h=e.elementsConfig[this.defaultElementType()])},this.createPropertyNode=function(t){return c.setLabelText(t),v=new i(e),v.setConfigName(d),v.x=0,v.y=0,v.setLabelText(t),v.tNode(l),v.isLinkElement(!0),v.setLinkElement(c),v},this.mouseHoverIn=function(){c.mouseEntered()||c.mouseEntered(!0)},this.mouseHoverOut=function(){c.mouseEntered(!1)},this.updateDrawedPosition=function(){if(!a)return void console.log("single property link  has no rendering shape oO");var t=e.computeIntersectionPoints(w,b);a.attr("x1",t.x1).attr("y1",t.y1).attr("x2",t.x2).attr("y2",t.y2);var n=.5*(t.x2+t.x1),r=.5*(t.y2+t.y1);v.setPosition(n,r),v.updateDrawedPosition()},this.getForceLink=function(){return y?[{source:c.domain(),target:c.range(),propertyData:c}]:[]},this.draw=function(e,t){y&&(n=e,u=t,a=o.drawLinkElement(n,h),p=o.drawArrowHead(n,t,c.id()+"_arrowHead",h))},this.handleGizmoRepresentationChanges=function(r,i,s,l){if(void 0!==a){c.updateConfig();var d=e.computeExpected_IntersectionPoints(w,b,1);console.log(d);var g=.5*(d.x2+d.x1),f=.5*(d.y2+d.y1);v.setPosition(g,f),v.updateDrawedPosition();var y=t.select(document.createElement("g")),m=o.drawLinkElement(y,h),x=o.drawArrowHead(n,u,c.id()+"_arrowHead",h);a.transition().duration(300).attr("style",m.attr("style")).attr("x1",d.x1).attr("y1",d.y1).attr("x2",d.x2).attr("y2",d.y2).each("end",function(){m.remove(),r===i&&(s&&l?s(l):e.graph.resumeForce())}),p[1].transition().duration(300).attr("d",x[1].attr("d")).attr("style",x[1].attr("style")),p[0].transition().duration(300).attr("viewBox",x[0].attr("viewBox")).attr("markerWidth",x[0].attr("markerWidth")).attr("markerHeight",x[0].attr("markerHeight")).attr("orient",x[0].attr("orient")).each("end",function(){x[0].remove()})}}};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t,n){(function(t){var r=n(8),o=n(6)(),i=n(4);e.exports=function(){var e=function(e){function n(){e.graph.ignoreEvents(),console.log("handling collapse opteration! "),a(!0),console.log("done")}function a(e){u.getLinkStructure().getRenderingPrimitive().collapseMultiLinks(e)}function s(t){var n;n=t?e.computeExpected_IntersectionPointsForMLP(L,x,P,1):e.computeIntersectionPointsForMLP(L,x,P,1);var r={x:n.x1,y:n.y1},o={x:x.x,y:x.y},i={x:n.x2,y:n.y2};return[r,o,i]}r.apply(this,arguments);var l,d,p,u,c,g,f,h=this,v=!1,y="hello",m=void 0,x=void 0,w=!0,b=200;this.linkDistance=function(e){return arguments.length?void(b=e):b};var C=1;this.linkStrength=function(e){return arguments.length?void(C=e):C},this.propertyObject=function(e){return arguments.length?void(u=e):u},this.visible=function(e){return arguments.length?(w=e,void(x&&x.visible(w))):w},this.drawLabelText=function(e){if(y){p=e.append("text").text(y);var t=p.node().getBoundingClientRect().height,n=p.node().getBoundingClientRect().width;return p.attr("dy",.25*t+"px"),p.attr("dx",-.5*n+"px"),p.style("pointer-events","none"),p}return null},this.setPropertyNode=function(e){x=e},this.getPropertyNode=function(){return x},this.setLabelText=function(e){y=e};var L,P;this.domain=function(e){return arguments.length?void(L=e):L},this.range=function(e){return arguments.length?void(P=e):P},this.setConfigObject=function(e){m=e},this.mouseEntered=function(e){return arguments.length?void(v=e):v},this.setConfigName=function(e){f=e},this.updateConfig=function(){m=e.elementsConfig[f],void 0===m&&(m=e.elementsConfig[this.defaultElementType()])},this.getPropertyNode=function(){return x},this.createPropertyNode=function(t){return h.setLabelText(t),console.log("Creating multiLInk property element : "+f),x=new i(e),x.setConfigName(f),x.defaultElementType("collapsedMultiLinkProperty"),x.x=0,x.y=0,x.setLabelText(t),x.connectDoubleClickAction(n),x.charge(-2e3),x.tNode(u),x.isForceNodeForProperty(!0),x.isLinkElement(!0),x.setLinkElement(h),x},this.mouseHoverIn=function(){h.mouseEntered()||h.mouseEntered(!0)},this.mouseHoverOut=function(){h.mouseEntered(!1)},this.updateDrawedPosition=function(){d&&(d.attr("d",S(s())),x.updateDrawedPosition())},this.getForceLink=function(){return w?[{source:h.domain(),target:x,propertyData:h},{source:x,target:h.range(),propertyData:h}]:[]},this.draw=function(e,t){w&&(l=e,d=o.drawArcLinkElement(l,m),g=t,c=o.drawArrowHead(l,t,h.id()+"_arrowHead",m))},this.handleGizmoRepresentationChanges=function(n,r,i,a){if(console.log("MultiLink Property Link yupdate for Gizmo Animation"),void 0!==d){h.updateConfig();var p=t.select(document.createElement("g")),u=o.drawArcLinkElement(p,m);d.transition().duration(300).attr("style",u.attr("style")).attr("d",S(s(!0))).each("end",function(){u.remove(),n===r&&(i&&a?i(a):e.graph.resumeForce())});var f=o.drawArrowHead(l,g,h.id()+"_arrowHead",m);c[1].transition().duration(300).attr("d",f[1].attr("d")).attr("style",f[1].attr("style")),c[0].transition().duration(300).attr("viewBox",f[0].attr("viewBox")).attr("markerWidth",f[0].attr("markerWidth")).attr("markerHeight",f[0].attr("markerHeight")).attr("orient",f[0].attr("orient")).each("end",function(){f[0].remove()})}};var S=t.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("cardinal")};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t,n){(function(t){var r=n(8),o=n(6)(),i=n(4);e.exports=function(){var e=function(e){function n(){var t=g.getPropertyMap(),n=f.x,r=f.y,o=h.x,i=h.y,a=o-n,s=i-r,l=Math.sqrt(a*a+s*s),d=a/l,p=s/l,u=.5*d*l,c=.5*p*l,v=p,y=-d,m=20,x=m*t.length,w=u+-.5*v*x,b=c+-.5*y*x;for(S=0;S<t.length;S++){var P=t[S].getRenderingPrimitive().getPropertyNode();P.updateConfig(),P.x=n+w+v*m*S,P.px=n+w+v*m*S,P.y=r+b+y*m*S,P.py=r+b+y*m*S}for(var S=0;S<t.length;S++)t[S].getRenderingPrimitive().visible(!0),t[S].getRenderingPrimitive().updateConfig();L=!1,C&&C.visible(!1),e.graph.redrawForView()}function a(t){var n=g.getPropertyMap();console.log(">>>>>>>>>>>>ML EXPAND?> ");var r=f.x,o=f.y,i=h.x,a=h.y,s=i-r,l=a-o,d=Math.sqrt(s*s+l*l),p=s/d,u=l/d,c=.5*p*d,v=.5*u*d,y=u,m=-p,x=20,w=x*n.length,b=c+-.5*y*w,P=v+-.5*m*w;for(k=0;k<n.length;k++){var S=n[k].getRenderingPrimitive().getPropertyNode();S.updateConfig(),S.x=r+b+y*x*k,S.px=r+b+y*x*k,S.y=o+P+m*x*k,S.py=o+P+m*x*k}for(var k=0;k<n.length;k++)n[k].getRenderingPrimitive().visible(!0),n[k].getRenderingPrimitive().updateConfig();L=!1,C&&C.visible(!1),console.log("expanded elements, so node should not be visible"),t&&t===!0&&e.graph.redraw()}function s(t){for(var n=g.getPropertyMap(),r=0;r<n.length;r++)n[r].getRenderingPrimitive().visible(!1);L=!0,C&&C.visible(!0),e.graph.redrawForView()}function l(t){for(var n=g.getPropertyMap(),r=0;r<n.length;r++)n[r].getRenderingPrimitive().visible(!1);L=!0,C&&C.visible(!0),t&&t===!0&&e.graph.redraw()}function d(){e.graph.ignoreEvents(),L?a(!0):l(!0)}r.apply(this,arguments);var p,u,c,g,f,h,v,y,m=this,x=!1,w="hello",b=void 0,C=void 0,L=!1;this.visible=function(e){return arguments.length?void(L=e):L};var P=350;this.linkDistance=function(e){return arguments.length?void(P=e):P};var S=.5;this.linkStrength=function(e){return arguments.length?void(S=e):S},this.setLinkContainer=function(e){g=e,f=g.domain().renderingPrimitive(),h=g.range().renderingPrimitive(),w="<"+e.getNumberOfLinks()+">"},this.setPropertyNode=function(e){C=e},this.setLabelText=function(e){w=e},this.domain=function(e){return arguments.length?void(f=e):f},this.range=function(e){return arguments.length?void(h=e):h},this.setConfigObject=function(e){b=e},this.mouseEntered=function(e){return arguments.length?void(x=e):x},this.setConfigName=function(e){c=e},this.updateConfig=function(){b=e.elementsConfig[c],void 0===b&&(b=e.elementsConfig.collapsedMultiLinkProperty)},this.interpolateML_Position=function(){m.updateDrawedPosition()},this.getPropertyNode=function(){return C},this.createPropertyNode=function(t){return m.setLabelText(w),C=new i(e),C.setConfigName(c),this.updateConfig(),C.updateConfig(),C.x=0,C.y=0,C.setLabelText(w),C.isNotExportable(!0),C.connectDoubleClickAction(d),C.tNode(v),C.isLinkElement(!0),C.setLinkElement(m),C},this.getRenderingShape=function(){return u},this.mouseHoverIn=function(){m.mouseEntered()||m.mouseEntered(!0)},this.mouseHoverOut=function(){m.mouseEntered(!1)},this.updateDrawedPosition=function(){if(!u)return void console.log("multilink has no rendering shape oO");var t=e.computeIntersectionPoints(f,h,1);u.attr("x1",t.x1).attr("y1",t.y1).attr("x2",t.x2).attr("y2",t.y2);var n=.5*(t.x2+t.x1),r=.5*(t.y2+t.y1);C.setPosition(n,r),C.updateDrawedPosition()},this.getForceLink=function(){return[{source:m.domain(),target:m.range(),propertyData:m}]},this.draw=function(e,t){console.log("Drawing ML Handler"),p=e,u=o.drawLinkElement(p,b),y=o.drawArrowHead(p,t,m.id()+"_arrowHead",b)},this.expandMultiLinks=function(t){e.graph.ignoreEvents(),a(t)},this.collapseMultiLinks=function(t){e.graph.ignoreEvents(),l(t)},this.expandMultiLinksForView=function(){e.graph.ignoreEvents(),n()},this.collapseMultiLinksForView=function(){e.graph.ignoreEvents(),s()},this.handleGizmoRepresentationChanges=function(n,r,i,a){if(console.log("MultiLinkHandler  Property Link yupdate for Gizmo Animation"),void 0!==u){m.updateConfig();var s=e.computeExpected_IntersectionPoints(f,h,1),l=.5*(s.x2+s.x1),d=.5*(s.y2+s.y1);C.setPosition(l,d),C.updateDrawedPosition(),console.log(C.getRenderingShape());var p=t.select(document.createElement("g")),c=o.drawLinkElement(p,b);u.transition().duration(300).attr("style",c.attr("style")).attr("x1",s.x1).attr("y1",s.y1).attr("x2",s.x2).attr("y2",s.y2).each("end",function(){c.remove(),n===r&&(i&&a?i(a):e.graph.resumeForce())})}}};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t,n){(function(t){var r=n(8),o=n(6)(),i=n(4);e.exports=function(){var e=function(e){function n(e){var t=C,n=m,r=2;p&&p.getLinkStructure()&&(r=p.getLinkStructure().getNumberOfLinks());var o=360/r,i=.8*o,l=Math.min(60,i),d=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,d),g=s(c),f=g-l/2,h=g+l/2,v=t.getRadius();e&&(v=t.getExpectedShapeRadius());var y=a(f),x=a(h),w=Math.cos(y)*v,b=Math.sin(y)*v,L=Math.cos(x)*v,P=Math.sin(x)*v,S={x:C.x+w,y:C.y+b},k={x:n.x,y:+n.y},O={x:C.x+L,y:C.y+P};return[S,k,O]}function a(e){return e%=360,e<0&&(e+=360),Math.PI*e/180}function s(e){return e*(180/Math.PI)}r.apply(this,arguments);var l,d,p,u,c,g,f=this,h=!1,v="hello",y=void 0,m=void 0,x=!0,w=120;this.linkDistance=function(e){return arguments.length?void(w=e):w};var b=1;this.linkStrength=function(e){return arguments.length?void(b=e):b},this.propertyObject=function(e){return arguments.length?void(p=e):p},this.visible=function(e){return arguments.length?(x=e,void(m&&m.visible(x))):x},this.setPropertyNode=function(e){m=e},this.getPropertyNode=function(){return m},this.setLabelText=function(e){v=e};var C,L;this.domain=function(e){return arguments.length?void(C=e):C},this.range=function(e){return arguments.length?void(L=e):L},this.setConfigObject=function(e){y=e},this.mouseEntered=function(e){return arguments.length?void(h=e):h},this.setConfigName=function(e){c=e},this.updateConfig=function(){y=e.elementsConfig[c],void 0===y&&(y=e.elementsConfig.defaultPropertyElement)},this.createPropertyNode=function(t){return f.setLabelText(t),m=new i(e),m.setConfigName(c),m.updateConfig(),m.x=0,m.y=0,m.setLabelText(t),m.charge(-500),m.isForceNodeForProperty(!0),m.isLinkElement(!0),m.setLinkElement(f),m.tNode(p),m},this.mouseHoverIn=function(){f.mouseEntered()||f.mouseEntered(!0)},this.mouseHoverOut=function(){f.mouseEntered(!1)},this.updateDrawedPosition=function(){d&&(d.attr("d",P(n())),m.updateDrawedPosition())},this.getForceLink=function(){return x?[{source:f.domain(),target:m,propertyData:f}]:[]},this.draw=function(e,t){x&&(l=e,g=t,d=o.drawArcLinkElement(l,y),u=o.drawArrowHead(l,t,f.id()+"_arrowHead",y))},this.handleGizmoRepresentationChanges=function(r,i,a,s){if(console.log("LOOP Property Link yupdate for Gizmo Animation"),void 0!==d){f.updateConfig();var p=t.select(document.createElement("g")),c=o.drawArcLinkElement(p,y);console.log("Computed tShape;"),console.log(c),d.transition().duration(300).attr("style",c.attr("style")).attr("d",P(n(!0))).each("end",function(){c.remove(),r===i&&(a&&s?a(s):e.graph.resumeForce(),e.graph.resumeForce())});var h=o.drawArrowHead(l,g,f.id()+"_arrowHead",y);u[1].transition().duration(300).attr("d",h[1].attr("d")).attr("style",h[1].attr("style")),u[0].transition().duration(300).attr("viewBox",h[0].attr("viewBox")).attr("markerWidth",h[0].attr("markerWidth")).attr("markerHeight",h[0].attr("markerHeight")).attr("orient",h[0].attr("orient")).each("end",function(){h[0].remove()})}};var P=t.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("cardinal").tension(-1)};return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t,n){(function(t){var n=0;e.exports=function(){var e=function(e){function r(e,t,n,r){t.classed("hidden",!0),n.style("color","red"),n.node().title="Could not find Notation under URL , using EXPLICIT notation import"}function o(){var n=e.getCanvasId(),o=t.select("#"+n);s=o.append("div"),s.style("position","absolute"),s.style("width","100%"),s.style("height","100%"),s.style("top","0"),s.style("opacity","0.5"),s.style("background","black"),l=o.append("div"),l.style("position","absolute"),l.style("top","0"),l.style("left","25%"),l.style("width","50%"),l.style("height","50%"),l.style("background","#18202A"),l.style("color","white"),a=l.append("h2"),a.style("text-align","center"),a.node().innerHTML="test";var i=e.graph.getViews();console.log("found "+i.length+" views");var d=i.length,p=l.append("h3");p.node().innerHTML="View Prefix and IRI",p.style("margin",0),l.append("br");var u=l.append("label");u.node().innerHTML="IRI: ";var c=l.append("input");c.node().value="http://example.org/view_"+d,c.node().id="input_iri_view",l.append("br");var g=l.append("label");g.node().innerHTML="Prefix: ";var f=l.append("input");f.node().value="view_"+d,f.node().id="input_prefix_view";var h,v=l.append("h3");v.node().innerHTML="Currently Used Notation ",v.style("margin",0),l.append("br");var y=e.graph.currentlyUsedNotation(),m=e.graph.getNotationArray();if(0===m.length){var x=l.append("label");x.style("color","red"),x.node().innerHTML="warning no notations found"}for(var w=0;w<m.length;w++)if(0===y.localeCompare(m[w].header.iri)){var b=l.append("div"),C=b.append("input");C.node().type="checkbox",C.node().id="cbx_viewUsesNotation";var L=b.append("span");C.node().checked=!0,h=m[w].header.iri;var P=e.graph.getOntologyPrefixFromPrefixList(m[w]);L.node().innerHTML="View shall use Notation : "+P+"  -> "+h;var S=l.append("div"),k=S.append("span");k.node().innerHTML=" ->   ",S.node().id="view_verificationNotationDiv";var O=S.append("input");O.node().type="checkbox",O.node().id="cbx_useImportOfNotation";var N=S.append("span");N.node().innerHTML="Import notation using owl:imports",N.style("color","yellow");var E=S.append("h3");E.node().innerHTML="&#8635",E.node().id="verifyingNotation",E.classed("spin",!0),r(h,E,N,O),C.on("click",function(){t.select("#view_verificationNotationDiv").classed("hidden",!this.checked)})}var T,F,I=l.append("div");I.style("position","absolute"),I.style("right","0"),I.style("padding","10px"),T=I.append("button"),T.node().type="button",T.node().innerHTML="Append",F=I.append("button"),F.node().type="button",F.node().innerHTML="Cancel",F.on("click",function(){e.removeDialogBox()}),T.on("click",function(){var n=t.select("#input_prefix_view").node().value,r=t.select("#input_iri_view").node().value,o=void 0,i=!1;t.select("#cbx_viewUsesNotation").node().checked===!0&&(o=h),i=t.select("#cbx_useImportOfNotation").node().checked,e.graph.appendView(n,r,o,i)===!0&&e.removeDialogBox()})}function i(){var n=e.getCanvasId(),o=t.select("#"+n);s=o.append("div"),s.style("position","absolute"),s.style("width","100%"),s.style("height","100%"),s.style("top","0"),s.style("opacity","0.5"),s.style("background","black"),l=o.append("div"),l.style("position","absolute"),l.style("top","0"),l.style("left","25%"),l.style("width","50%"),l.style("height","50%"),l.style("background","#18202A"),l.style("color","white"),l.style("overflow","auto"),a=l.append("h2"),a.style("text-align","center"),a.node().innerHTML="test";var i=l.append("h3");i.node().innerHTML="specification Prefix and IRI",
i.style("margin",0),l.append("br");var d=l.append("label");d.node().innerHTML="IRI: ";var p=l.append("input");p.node().value="http://example.org/specification_0",p.node().id="input_iri_specification",l.append("br");var u=l.append("label");u.node().innerHTML="Prefix: ";var c=l.append("input");c.node().value="specification_0",c.node().id="input_prefix_specification";var g=l.append("h3");g.node().innerHTML="Export Used Notation ",g.style("margin",0),l.append("br");var f=e.graph.getNotationArray();if(0===f.length){var h=l.append("label");h.style("color","red"),h.node().innerHTML="warning no notations found"}for(var v=[],y=0;y<f.length;y++){var m=l.append("div"),x=m.append("input");x.node().type="checkbox",x.node().index=y,x.node().id="providedNotation"+y,v.push(x);var w=m.append("span"),b=f[y].header.iri,C=e.graph.getOntologyPrefixFromPrefixList(f[y]);x.node().notation=b,w.node().innerHTML="Notation : "+C+"  -> "+b;var L=l.append("div"),P=L.append("span");P.node().innerHTML=" ->   ",L.node().id="view_verificationNotationDiv_"+y;var S=L.append("input");S.node().type="checkbox",S.node().id="cbx_useImportOfNotation_"+y;var k=L.append("span");k.node().innerHTML="Import notation using owl:imports",k.style("color","yellow");var O=L.append("h3");O.node().innerHTML="&#8635",O.node().id="verifyingNotation",O.classed("spin",!0),r(b,O,k,S),x.on("click",function(){var e=this.index;t.select("#view_verificationNotationDiv_"+e).classed("hidden",!this.checked)})}var N=e.graph.getViews();if(console.log("found "+N.length+" views"),0===N.length){var E=l.append("div"),T=E.append("h3");T.node().innerHTML="No views found, append current visualization as view?";var F=E.append("input");F.node().type="checkbox",F.node().type="checkbox";var w=E.append("span");w.node().innerHTML="OKAY";var I=E.append("div");I.node().id="defView_prefixIriDiv",I.classed("hidden",!0);var D=I.append("label");D.node().innerHTML="IRI: ";var R=I.append("input");R.node().value="http://example.org/view_0",R.node().id="input_iri_view0",I.append("br");var M=I.append("label");M.node().innerHTML="Prefix: ";var A=I.append("input");A.node().value="view_0",A.node().id="input_prefix_view0";var m=I.append("div"),x=m.append("input");x.node().type="checkbox",x.node().id="cbx_viewUsesNotation";var w=m.append("span");x.node().checked=!0,b=e.graph.currentlyUsedNotation();var _=e.graph.currentlyUsedNotationObject(),C=e.graph.getOntologyPrefixFromPrefixList(_);w.node().innerHTML="View shall use Notation : "+C+"  -> "+b;var L=m.append("div"),P=L.append("span");P.node().innerHTML=" ->   ",L.node().id="view_verificationNotationDiv";var S=L.append("input");S.node().type="checkbox",S.node().id="cbx_useImportOfNotation";var k=L.append("span");k.node().innerHTML="Import notation using owl:imports",k.style("color","yellow");var O=L.append("h3");O.node().innerHTML="&#8635",O.node().id="verifyingNotation",O.classed("spin",!0),r(b,O,k,S),x.on("click",function(){t.select("#view_verificationNotationDiv").classed("hidden",!this.checked)});var z=!1;F.on("change",function(){console.log("append view has changed"),console.log(this.checked),this.checked===!0?(z=!0,I.classed("hidden",!1)):(z=!1,I.classed("hidden",!0))})}var H,j,V=l.append("div");V.style("position","absolute"),V.style("right","0"),V.style("padding","10px"),H=V.append("button"),H.node().type="button",H.node().innerHTML="Export",j=V.append("button"),j.node().type="button",j.node().innerHTML="Cancel",j.on("click",function(){e.removeDialogBox()}),H.on("click",function(){var n=t.select("#input_prefix_specification").node().value,r=t.select("#input_iri_specification").node().value,o=e.graph.getViews();if(console.log("found "+o.length+" views"),z===!0&&0===o.length){console.log("WAPI : NEED TO APPEND THE VIEW ");var i=t.select("#input_prefix_view0").node().value,a=t.select("#input_iri_view0").node().value,s=void 0,l=!1;t.select("#cbx_viewUsesNotation").node().checked===!0&&(s=b),l=t.select("#cbx_useImportOfNotation").node().checked,e.graph.appendView(i,a,s,l)}for(var d=[],p=[],u=0;u<v.length;u++){var c=v[u];if(c.node().checked===!0){d.push(c.node().notation);var g=c.node().index;p.push(t.select("#cbx_useImportOfNotation_"+g).node().checked)}}console.log("#@#######################"),console.log(d),console.log(p),console.log("-----------------------------------"),e.graph.exportSpecification(n,r,d,p),e.removeDialogBox()})}var a,s,l;"dialogBox_"+n++;this.setTitle=function(e){a.node().innerHTML=e},this.cleanUp=function(){s.remove(),l.remove()},this.initialize=function(e){"specification"===e&&i(),"appendView"===e&&o()}};return e.prototype.constructor=e,e}()}).call(t,n(2))},function(e,t,n){(function(t){var n={};n.Instance=void 0,n.createLoader=function(){return n.Instance?n.Instance:(n.Instance={},n.Instance.apiCore=void 0,n.Instance)};var r=n.createLoader();r.setAPIcore=function(e){r.apiCore=e},r.loadFromLocalJSON=function(e,n){t.xhr(e,"application/json",function(t,r){return null!==t&&500===t.status?(console.log(t),void console.log("HAS AN ERROR AND A STATUS WHILE LOADING "+e)):void n(e,r.responseText)})},r.loadNotationFromJSONFile=function(e){var n=document.createElement("input");n.id="HIDDEN_FILE_JSON_INPUT",n.type="file",n.accept=".json",n.autocomplete="off",n.placeholder="load a json File";var r,o,i,a=t.select(n);n.click(),a.on("change",function(){var t=a.property("files");if(t.length>0){r=t[0],o=r.name,a.remove();var n=new FileReader;n.readAsText(r),n.onload=function(){i=n.result,e(o,i)}}})},r.saveOntologyAsJSON=function(e){console.log("want to save the ontology"+e);var t="{\n";t+='"_comment":"Exported with WebVOWL Api (v3.version 0.0.1 )", \n',console.log("Getting Views"),t+=r.apiCore.graph.getAllViewDefinitions(),console.log("Getting MetaInformation"),t+=r.apiCore.graph.getMetaInformation().exportAsJson(),console.log("getting Class Definitions"),t+=",\n"+r.apiCore.graph.getClassDefinitions(),console.log("getting Class Attributes"),t+=",\n"+r.apiCore.graph.getClassAttributes(),console.log("getting Poperty descriptions"),t+=",\n"+r.apiCore.graph.getPropertyDefinitions(),console.log("getting Property attributes"),t+=",\n"+r.apiCore.graph.getPropertyAttributes(),t+="\n}",console.log("Done");var n="data:text/json;charset=utf-8,"+encodeURIComponent(t),o=r.apiCore.getHiddenExporterButton();o.attr("href",n).attr("download",e),o.node().click()},e.exports=n.Instance}).call(t,n(2))},function(e,t,n){var r={};r.Instance=void 0,r.createParser=function(){return r.Instance?r.Instance:(r.Instance={},r.Instance)};var o=r.createParser(),i=n(17),a=n(18),s=n(19),l=n(20);o.parseOWL2VOWL=function(e){if(e.header&&e.header.gizmo){var t=e.header.gizmo;console.log("Gizmo Ontology: "+t)}if(o.Data={},o.Data.nodes=[],o.Data.properties=[],o.Data.ontologyInformation=void 0,o.Data.viewerInformation=void 0,e.header){var n=e.header,r=new l;n.languages&&r.languages(n.languages),n.baseIris&&r.baseIrirs(n.baseIris),n.title&&r.title(n.title),n.iri&&r.iri(n.iri),n.version&&r.version(n.version),n.author&&r.author(n.author),n.description&&r.description(n.description),n.labels&&r.labels(n.labels),n.other&&r.otherInformation(n.other),n.prefixList&&r.prefixList(n.prefixList),o.Data.ontologyInformation=r}e.viewDefinitions&&(o.Data.viewerInformation=e.viewDefinitions);var d,p=e.class,u=e.classAttribute,c=e.property,g=e.propertyAttribute,f=[],h=[],v=[],y=p.length;for(console.log("found "+y+" classes"),d=0;d<y;d++)f[p[d].id]=p[d].type;for(y=c.length,console.log("found "+y+" properties"),d=0;d<y;d++)v[c[d].id]=c[d].type;y=u.length;var m;for(d=0;d<y;d++){var x=new i;m=u[d],x.id(m.id).label(m.label).iri(m.iri).baseIri(m.baseIri).type(f[m.id]),o.Data.nodes.push(x),h[x.id()]=x}y=g.length;var w={};for(d=0;d<y;d++){var b=new a;m=g[d],b.id(m.id),b.label(m.label),b.iri(m.iri),console.log("<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<"+m.iri+" >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>"),b.baseIri(m.baseIri),b.type(v[m.id]);var C=m.domain,L=m.range,P=h[C],S=h[L];b.domain(P),b.range(S),P===S&&(b.isLoop(!0),P.addLoopProperty(b));var k=!1;v[m.id].toLowerCase()==="owl:dataTypeProperty".toLowerCase()&&(P.addDatatypeProperty(b),k=!0),k===!1&&P!==S&&(P.addObjectProperty(b),S.addObjectProperty(b));var O=b.getDomRanId(C,L);if(void 0===w[O]){var N=new s;P===S&&N.isLoop(!0),N.isDatatype(k),N.binderId(O),N.addProperty(b),N.domain(b.domain()),N.range(b.range()),b.setLinkStructure(N),w[O]=N}else w[O].addProperty(b),b.setLinkStructure(w[O]);o.Data.properties.push(b)}return o.Data.linkMap=w,o.Data},e.exports=r.Instance},function(e,t){e.exports=function(){var e=function(){function e(e,n){var r="IRI-based",o="undefined";if("undefined"!=typeof e){if("string"==typeof e)return e;if(n&&e.hasOwnProperty(n))return e[n];var i=t(e,"en");return i?i:(i=t(e,o),i?i:e[r])}}function t(e,t){for(var n in e)if(n===t&&e.hasOwnProperty(n))return e[n]}var n=this;n.node_id=void 0,n.node_label=void 0,n.node_type=void 0,n.node_iri="",n.node_baseIri="",n.node_instance=0,n.node_initPosition=void 0;var r=[],o=[],i=[];n.addLoopProperty=function(e){r.indexOf(e)==-1&&r.push(e)},n.addObjectProperty=function(e){i.indexOf(e)==-1&&i.push(e)},n.addDatatypeProperty=function(e){o.indexOf(e)==-1&&o.push(e)},n.getObjectProperties=function(){return i},n.getLoopProperties=function(){return r},n.getDatatypeProperties=function(){return o},n.getAllProperties=function(){return[].concat(i).concat(r).concat(o)},n.showDatatype=function(e,t){var r;for(r=0;r<o.length;r++)o[r].range().renderingPrimitive().visible(e),o[r].range().renderingPrimitive().smartExpanding(e),o[r].getRenderingPrimitive().visible(e);t===!0&&n.renderingPrimitive().forceGraphRedraw()},n.showLoops=function(e,t){var o;for(o=0;o<r.length;o++)r[o].getRenderingPrimitive().visible(e);t===!0&&n.renderingPrimitive().forceGraphRedraw()},n.showLoopsAndDatatype=function(e){console.log("Type node show datatype and loops"),n.showDatatype(e,!1),n.showLoops(e,!0),console.log("Type node show datatype and loops << DONE")},n.node_renderingPrimitive=void 0,n.renderingPrimitive=function(e){return arguments.length?(n.node_renderingPrimitive=e,e.tNode(n),n):n.node_renderingPrimitive},n.initialPosition=function(e){return arguments.length?(n.node_initPosition=e,n):n.node_initPosition},n.getLabelForCurrentLang=function(){if("string"==typeof n.node_label)return n.node_label;var t="en";return e(n.node_label,t)},n.id=function(e){return arguments.length?(n.node_id=e,n):n.node_id},n.annotations=function(e){return arguments.length?(n.node_annotations=e,n):n.node_annotations},n.iri=function(e){return arguments.length?(n.node_iri=e,n):n.node_iri},n.baseIri=function(e){return arguments.length?(n.node_baseIri=e,n):n.node_baseIri},n.label=function(e){return arguments.length?(n.node_label=e,n):n.node_label},n.type=function(e){return arguments.length?(n.node_type=e,n):n.node_type},n.exportAsJson=function(){},n.getJsonClassDefinition=function(){return'{ "id":"'+n.id()+'" , "type":"'+n.type()+'"}'},n.getJsonClassDescription=function(){return'{ "id":'+JSON.stringify(n.id(),null," ")+' \n,"iri":'+JSON.stringify(n.iri(),null," ")+' \n,"baseIri":'+JSON.stringify(n.baseIri(),null," ")+' \n,"label":'+JSON.stringify(n.label(),null," ")+"\n}"},n.exportAsTTL=function(){}};return e.prototype.constructor=e,e}()},function(e,t){e.exports=function(){var e=function(){function e(e,n){var r="IRI-based",o="undefined";if("undefined"!=typeof e){if("string"==typeof e)return e;if(n&&e.hasOwnProperty(n))return e[n];var i=t(e,"en");return i?i:(i=t(e,o),i?i:e[r])}}function t(e,t){for(var n in e)if(n===t&&e.hasOwnProperty(n))return e[n]}var n,r,o,i=this,a=-1,s=-1,l=void 0,d=void 0,p="",u="",c=void 0,g=void 0;i.getRenderingPrimitive=function(){return g},i.setRenderingPrimitive=function(e){g=e},i.getLinkStructure=function(){return c},i.isMultiLink=function(){return c.isMultiLink()},i.isLoop=function(e){return arguments.length?void(o=e):o},i.domain=function(e){return arguments.length?void(n=e):n},i.range=function(e){return arguments.length?void(r=e):r},i.setLinkStructure=function(e){c=e},i.id=function(e){return arguments.length?(a=e,i):a},i.getDomRanId=function(e,t){return s===-1&&(s=e<t?e+"_"+t:t+"_"+e),s},i.getLabelForCurrentLang=function(){if("string"==typeof l)return l;var t="en";return e(l,t)},i.iri=function(e){return arguments.length?(p=e,i):p},i.baseIri=function(e){return arguments.length?(u=e,i):u},i.label=function(e){return arguments.length?(l=e,i):l},i.type=function(e){return arguments.length?(d=e,i):d},i.getJsonPropertyDefinition=function(){return'{ "id":"'+i.id()+'" , "type":"'+i.type()+'"}'},i.getJsonPropertyDescription=function(){return'{ "id":'+JSON.stringify(i.id(),null," ")+' \n,"iri":'+JSON.stringify(i.iri(),null," ")+' \n,"baseIri":'+JSON.stringify(i.baseIri(),null," ")+' \n,"domain":'+JSON.stringify(i.domain().id(),null," ")+' \n,"range":'+JSON.stringify(i.range().id(),null," ")+' \n,"label":'+JSON.stringify(i.label(),null," ")+"\n}"}};return e.prototype.constructor=e,e}()},function(e,t){e.exports=function(){var e=function(){var e,t,n=this,r=void 0,o=[],i=0,a=!1,s=void 0,l=!1;n.isDatatype=function(e){return arguments.length?void(l=e):l},n.getParentDomainNode=function(){return e},n.getRenderingPrimitive=function(){return s},n.setRenderingPrimitive=function(e){s=e},n.domain=function(t){return arguments.length?void(e=t):e},n.range=function(e){return arguments.length?void(t=e):t},n.binderId=function(e){return arguments.length?void(r=e):r},n.addProperty=function(e){o.indexOf(e)===-1&&(o.push(e),i++)},n.isMultiLink=function(){return i>=2},n.isLoop=function(e){return arguments.length?void(a=e):a},n.getNumberOfLinks=function(){return i},n.getPropertyMap=function(){return o}};return e.prototype.constructor=e,e.prototype.toString=function(){var e="TypeLink: \n   id = "+this.binderId()+"\n   isMultiLink? "+this.isMultiLink()+"\n",t=this.getPropertyMap();e+="   Stored Properties: \n";for(var n=0;n<t.length;n++)e+="           "+t[n].id()+"    "+t[n].getLabelForCurrentLang()+"  "+t[n].type()+"\n";return e},e}()},function(e,t){e.exports=function(){var e=function(){var e=this,t=[],n=[],r={},o="",i="",a=[],s={},l={},d={},p={};e.languages=function(e){if(!arguments.length)return t;if("string"==typeof e)t.indexOf(e)===-1&&t.push(e);else for(var n=0;n<e.length;n++)t.push(e[n])},e.baseIrirs=function(e){if(!arguments.length)return n;if("string"==typeof e)n.indexOf(e)===-1&&n.push(e);else for(var t=0;t<e.length;t++)n.push(e[t])},e.title=function(e,t){if(0===arguments.length)return r;if("string"==typeof e){if(1===arguments.length&&r.hasOwnProperty(e))return r[e]}else r=e;2===arguments.length&&(r[e]=t)},e.prefixList=function(e,t){if(0===arguments.length)return d;if("string"==typeof e){if(1===arguments.length&&d.hasOwnProperty(e))return d[t]}else d=e;2===arguments.length&&(d[e]=t)},e.iri=function(e){return arguments.length?void(o=e):o},e.version=function(e){return arguments.length?void(i=e):i},e.author=function(e){if(!arguments.length)return a;if("string"==typeof e)a.indexOf(e)===-1&&a.push(e);else for(var t=0;t<e.length;t++)a.push(e[t])},e.description=function(e,t){if(0===arguments.length)return s;if("string"==typeof e){if(1===arguments.length&&r.hasOwnProperty(e))return s[e]}else s=e;2===arguments.length&&(s[e]=t)},e.labels=function(e,t){if(0===arguments.length)return l;if("string"==typeof e){if(1===arguments.length&&r.hasOwnProperty(e))return l[e]}else l=e;2===arguments.length&&(l[e]=t)},e.otherInformation=function(e){return arguments.length?void(p=e):p},e.add_otherInformationElement=function(e,t){p[e]=t},e.showInformation=function(){console.log(t),console.log(n),console.log(d),console.log(r),console.log(o),console.log(i),console.log(a),console.log(s),console.log(l),console.log(p)},e.exportAsJson=function(){var e='"header":{\n';return e+='"languages": '+JSON.stringify(t,null," "),e+='\n,"baseIris": '+JSON.stringify(n,null," "),e+='\n,"prefixList": '+JSON.stringify(d,null," "),e+='\n,"title": '+JSON.stringify(r,null," "),e+='\n,"iri": '+JSON.stringify(o,null," "),e+='\n,"version": '+JSON.stringify(i,null," "),e+='\n,"author": '+JSON.stringify(a,null," "),e+='\n,"description": '+JSON.stringify(s,null," "),e+='\n,"labels": '+JSON.stringify(l,null," "),e+='\n,"other": '+JSON.stringify(p,null," "),e+="\n}"}};return e.prototype.constructor=e,e}()},function(e,t,n){e.exports=function(e){var t={};return t.canvas=n(22)(e),t.owlClass=n(23)(e),console.log(t.canvas),t}},function(e,t){e.exports=function(e){var t={};t.width="200px",t.height="200px",t.bgColor="#ECF0F1",t.layerArray=["markerContainer","links","properties","nodes"];var n={};return n.width=function(e){return arguments.length?void(t.width=e):t.width},n.height=function(e){return arguments.length?void(t.height=e):t.height},n.bgColor=function(e){return arguments.length?void(t.bgColor=e):t.bgColor},n.getLayers=function(){return t.layerArray},n.setLayers=function(e){t.layerArray=e},n.addLayer=function(e){t.layerArray.push(e)},n}},function(e,t){e.exports=function(e){var t={};t.renderingType="circle",t.width=100,t.height=50,t.bgColor="#ffa621",t.strokeElment=!0,t.strokeWidth="1px",t.strokeStyle="solid",t.strokeColor="#000",t.radius=50,t.rendingLayer=void 0,t.hoverInCurser="pointer",t.hoverInColor="#f00";var n={};return n.strokeElement=function(e){return arguments.length?void(t.strokeElment=e):t.strokeElment},n.renderingType=function(e){return arguments.length?void(t.renderingType=e):t.renderingType},n.width=function(e){return arguments.length?void(t.width=e):t.width},n.height=function(e){return arguments.length?void(t.height=e):t.height},n.bgColor=function(e){return arguments.length?void(t.bgColor=e):t.bgColor},n.strokeWidth=function(e){return arguments.length?void(t.strokeWidth=e):t.strokeWidth},n.strokeStyle=function(e){return arguments.length?void(t.strokeStyle=e):t.strokeStyle},n.strokeColor=function(e){return arguments.length?void(t.strokeColor=e):t.strokeColor},n.radius=function(e){return arguments.length?void(t.radius=e):t.radius},n.renderingLayer=function(e){return arguments.length?void(t.renderingLayer=e):t.renderingLayer},n}},function(e,t,n){(function(t){e.exports=function(e){function n(){return"#"+e.getCanvasId()+"nodes"}function r(){return"#"+e.getCanvasId()+"links"}function o(){for(var t=e.config.canvas.getLayers(),n=0;n<t.length;n++)if("markerContainer"===t[n]){var r=e.getCanvasGraphRoot().append("defs");r.node().id=e.getCanvasId()+t[n]}else{var o=e.getCanvasGraphRoot().append("g");o.node().id=e.getCanvasId()+t[n]}e.getCanvasSvgRoot().call(h)}function i(){var e=!1;if(t.event.sourceEvent&&t.event.sourceEvent.deltaY&&(e=!0),e===!1){if(M===!0)return;return R=t.event.scale,D=t.event.translate,void y.attr("transform","translate("+D+")scale("+R+")")}R=t.event.scale,D=t.event.translate,y.transition().tween("attr.translate",function(){return function(e){M=!0;var n=t.transform(y.attr("transform"));D[0]=n.translate[0],D[1]=n.translate[1],R=n.scale[0]}}).each("end",function(){M=!1}).attr("transform","translate("+D+")scale("+R+")").ease("linear").duration(250)}function a(){s(),L=Date.now();var e=L-P,t=(1e3/e).toFixed(2);C.node().innerHTML="FPS: "+t+"<br>Nodes:"+b.nodes().length+"<br>Links:"+b.links().length,P=Date.now()}function s(){if(J=b.alpha(),j===!1)m.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),x.each(function(e){e.updateDrawedPosition()});else{for(var e=t.geom.quadtree(T),n=0,r=T.length;++n<r;)e.visit(l(T[n]));m.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})}}function l(e){var t=e.radius+16,n=e.x-t,r=e.x+t,o=e.y-t,i=e.y+t;return function(t,a,s,l,d){if(t.point&&t.point!==e){var p=e.x-t.point.x,u=e.y-t.point.y,c=Math.sqrt(p*p+u*u),g=e.radius+t.point.radius;c<g&&(c=(c-g)/c*.5,e.x-=p*=c,e.y-=u*=c,t.point.x+=p,t.point.y+=u)}return a>r||l<n||s>i||d<o}}function d(){console.log("calling createForceElements");var t,n=[],r=[];for(t=0;t<F.length;t++)n=n.concat(F[t].getForceLink());for(t=0;t<T.length;t++)T[t].visible()===!0&&r.push(T[t]);b.nodes(r),b.links(n),b.charge(function(e){return e.charge()}).linkDistance(function(e){return e.propertyData.linkDistance()}).linkStrength(function(e){return e.propertyData.linkStrength()}).size(e.getSize()).gravity(E.gravity())}function p(e,t,n,r){var o,i,a=r[0];return a?(o=(e-n[0])/a,i=(t-n[1])/a):(o=(e-n[0])/r,i=(t-n[1])/r),{x:o,y:i}}function u(t,n,r){return R=e.getSize()[1]/t[2],D=[n-t[0]*R,r-t[1]*R],h.translate(D),h.scale(R),"translate("+D[0]+","+D[1]+")scale("+R+")"}function c(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5];return D[0]=n+e*(o-n),D[1]=r+e*(i-r),R=a+e*(s-a),"translate("+D[0]+","+D[1]+")scale("+R+")"}function g(e,t){for(var n=0;n<e.length;n++){for(var r,o=e[n],i=0;i<B.length;i++){var a=B[i];if(a.header&&a.header.iri){var s=a.header.iri;if(0===o.localeCompare(s)){r=a;break}}}if(r){console.log("searching for prefix of :"+o);var l="",d=r.header.prefixList;for(var p in d)if(d.hasOwnProperty(p)){var u=d[p];if(console.log(u),0===o.localeCompare(u)&&(l=p,!t.hasOwnProperty(p))){t[p]=o+"#";break}}}}}var f,h,v,y,m,x,w,b,C,L,P,S,k,O,N,E={},T=[],F=[],I=[],D=[0,0],R=1,M=!1,A=!1,_=-500,z=.025,H=!1,j=!1,V=void 0,W=!1,J=3,G=[],U=-1,B=[];return E.setParseOntologyData=function(e){k=e},E.setDebugTextInput=function(e){N=e},E.coreApi=function(e){return arguments.length?void(S=e):S},E.viewListFunc=void 0,E.setMetaInformation=function(e){f=e},E.setViewInformation=function(e){if(e){G=[],console.log("Added views to graph ");for(var t=0;t<e.length;t++){var n=e[t];G.push(n),console.log("pushed a view"),console.log(n)}U=0}else console.log("Could not find views in loaded file!"),G=[],U=-1;E.viewListFunc&&E.viewListFunc()},E.applyViewIfPresent=function(){G.length>0&&U>-1&&(console.log("Applying View "),E.applyView(G[U]),console.log("DONE"))},E.applyViewByIndex=function(e){U=e,E.applyViewIfPresent()},E.continueForceStateAfterAnimation=function(e){A===!1&&(J=.05,console.log("force alpha is : "+J),b.resume(),E.resumeForce()),E.updateAllConfigObjects(),E.redraw(),e&&E.applyGraphOptionsForView(e)},E.applyGraphOptionsForView=function(e){if(e){var t=parseFloat(e.graphZoomFactor),n=parseFloat(e.graphTranslation[0]),r=parseFloat(e.graphTranslation[1]),o=e.forceActive;console.log("want to apply graph opts"),console.log("Zoom Factor "+t),console.log("Translation "+n+" "+r),console.log("ForceActive "+o),E.zoomToGivenPosition(t,n,r),o===!0?E.resumeForce():E.stopForce()}},E.applyView=function(e){function t(e){console.log("calling callback function");for(var t,n,r,i,a=e.length,s=0;s<a-1;s++)t=e[s].id,n=e[s].pos,r=e[s].visible,i=S.getRenderingElementForId(t),i.visible(r),i.handlePositionUpdateByViewer(n);var l=a-1;t=e[l].id,n=e[l].pos,r=e[l].visible,i=S.getRenderingElementForId(t),i.visible(r),i.handlePositionUpdateByViewer(n,E.continueForceStateAfterAnimation,o)}console.log("Apply View is called"),E.stopForce();var n=e.gizmoConfig,r=e.elementAttributes,o=e.graphOptions;console.log("Wannt to apply view! ^^^^^^^^^^^^^^^^  "+e.viewNotation);var i=S.getLoadedGizmoFileName();E.updateAllConfigObjects();for(var a=0;a<r.length;a++){var s=r[a].id,l=r[a].visible,d=S.getRenderingElementForId(s),p=d.visible();d.visible(l);var u=void 0,c=void 0;l===!1&&d.getPropertyNode&&(u=d.getPropertyNode(),u.tNode&&u.tNode().getLinkStructure&&u.tNode().getLinkStructure()&&(c=u.tNode().getLinkStructure(),c.isDatatype()&&c.getParentDomainNode().renderingPrimitive().collapseDatatypes(!1),c.isLoop()&&c.getParentDomainNode().renderingPrimitive().collapseLoops(!1),c.isMultiLink()&&c.getRenderingPrimitive()&&c.getRenderingPrimitive().collapseMultiLinks(!1))),l===!0&&p!==l&&d.getPropertyNode&&(u=d.getPropertyNode(),u.tNode&&u.tNode().getLinkStructure&&u.tNode().getLinkStructure()&&(c=u.tNode().getLinkStructure(),c.isDatatype()&&c.getParentDomainNode().renderingPrimitive().expandDatatypes(!1),c.isLoop()&&c.getParentDomainNode().renderingPrimitive().expandLoops(!1),c.isMultiLink()&&c.getRenderingPrimitive()&&c.getRenderingPrimitive().expandMultiLinks(!1)))}E.redraw(),E.stopForce(),console.log("---------------------- REDRAW !!!!!!!!"),"string"==typeof n?(console.log("this thing wants a gizmo config file to be loaded"),i!==n?S.loadGizmoConfigWithCallBack(n,t,r):t(r)):console.log("a one in all file is acctually loaded, currently not yet implemented")},E.getMetaInformation=function(){return f},E.setDebugContainer=function(e){C=e},E.colide=function(e){j=e},E.forcePlayPause=function(){return A=!A,A?b.stop():b.resume(),A},E.interpolatePositions=function(){s()},E.showFPSAndElementStatistic=function(e){W=e},E.ignoreEvents=function(){t.event&&t.event.stopPropagation()},E.charge=function(e){return arguments.length?void(_=e):_},E.gravity=function(e){return arguments.length?void(z=e):z},E.zoomToExtentOfGraphWhenFinished=function(e){H=e},E.createFroceDirectedLayout=function(){console.log("hello Force"),b=t.layout.force(),W?b.on("tick",a):b.on("tick",s),d(),b.start(),console.log("THIS SHOULD BE EMPTY")},E.updateForceLayout=function(){d(),b.start(),b.stop(),A||b.resume()},E.initializeRendering=function(){y=e.getCanvasGraphRoot();v=t.behavior.drag().origin(function(e){return e}).on("dragstart",function(e){t.event.sourceEvent.stopPropagation(),e.fixed=!0}).on("drag",function(e){t.event.sourceEvent.stopPropagation(),e.setPosition(t.event.x,t.event.y),e.px=t.event.x,e.py=t.event.y,A?b.on("tick")():b.resume(),e.updateDrawedPosition()}).on("dragend",function(e){e.fixed=!1}),h=t.behavior.zoom().duration(150).scaleExtent([.2,5]).on("zoom",i).on("zoomstart",function(){t.event.sourceEvent&&t.event.sourceEvent.buttons&&1===t.event.sourceEvent.buttons&&e.getCanvasSvgRoot().style("cursor","move")}).on("zoomend",function(){e.getCanvasSvgRoot().style("cursor","auto");var n=t.transform(y.attr("transform")),r=n.translate[0],o=n.translate[1],i=n.scale[0];console.log("x:"+r+"  y:"+o+"  z:"+i),D[0]=r,D[1]=o,R=i}),e.getCanvasSvgRoot().call(h),h=h.scaleExtent([.02,5]),y&&h.event(y)},E.createNodeFromtNode=function(t){var n=new e.baseNodeConstructor(e);n.nodeObject(t);var r="defaultNodeElement";return n.setLabelText(t.getLabelForCurrentLang()),"owl:Class"===t.type()&&(n.setConfigName("owlClass"),n.connectDoubleClickAction(function(){console.log("Double Click action on owlClass"),n.handleDatatypeAndLoops()})),"owl:Thing"===t.type()&&(n.setConfigName("owlThing"),n.setLabelText("Thing"),n.connectDoubleClickAction(function(){n.handleDatatypeAndLoops()})),"rdfs:Datatype"===t.type()&&(n.setConfigName("rdfsDatatype"),r="defaultDatatypeElement"),"rdfs:Literal"===t.type()&&(n.setConfigName("rdfsLiteral"),r="defaultDatatypeElement"),n.defaultElementType(r),n.updateConfig(),void 0===t.initialPosition()&&n.setPosition(100*Math.random(),100*Math.random()),t.renderingPrimitive(n),T.push(n),S.addRenderingElementToIdMap(n,t.id()),t.getDatatypeProperties()&&t.getDatatypeProperties().length>0&&n.hasCollapsibleNodes(!0),n},E.createMultiLinkStructures=function(t){var n="collapsedMultiLinkProperty";if(t.isMultiLink()&&!t.isLoop()){var r=new e.multiLinkHandlerConstructor(e);r.setLinkContainer(t),r.setConfigName(n);var o=r.createPropertyNode("");o.tNode(r),o.defaultElementType("collapsedMultiLinkProperty"),o.updateConfig(),I.push(o),F.push(r),t.setRenderingPrimitive(r),r.collapseMultiLinks(),S.addMLRenderingElementToMap(r)}},E.createPropertyFromtProperty=function(t){var n="defaultPropertyElement";if(!t.isMultiLink()&&!t.isLoop()){var r=new e.singleLinkConstructor(e);r.defaultElementType(n),r.setLabelText(t.getLabelForCurrentLang()),r.propertyObject(t),t.type().toLowerCase()==="owl:datatypeProperty".toLowerCase()&&r.setConfigName("owlDatatypeProperty"),t.type().toLowerCase()==="owl:objectProperty".toLowerCase()&&r.setConfigName("owlObjectProperty"),t.type().toLowerCase()==="rdfs:subClassOf".toLowerCase()&&(r.setConfigName("rdfssubClassOf"),t.label("Subclass of")),r.updateConfig(),r.domain(t.domain().renderingPrimitive()),r.range(t.range().renderingPrimitive());var o=r.createPropertyNode(t.getLabelForCurrentLang());return o.defaultElementType(n),o.updateConfig(),I.push(o),F.push(r),t.setRenderingPrimitive(r),r.updateConfig(),S.addRenderingElementToIdMap(r,t.id()),r}if(t.isLoop()){var i=new e.loopLinkConstructor(e);i.defaultElementType(n),i.setLabelText(t.getLabelForCurrentLang()),i.propertyObject(t),t.type().toLowerCase()==="owl:objectProperty".toLowerCase()&&i.setConfigName("owlObjectProperty"),i.updateConfig(),i.domain(t.domain().renderingPrimitive()),i.domain().hasCollapsibleLoops(!0),i.range(t.range().renderingPrimitive());var a=i.createPropertyNode(t.getLabelForCurrentLang());return a.defaultElementType(n),a.updateConfig(),T.push(a),F.push(i),t.setRenderingPrimitive(i),S.addRenderingElementToIdMap(i,t.id()),i}var s=new e.multiLinkConstructor(e);s.defaultElementType(n),s.setLabelText(t.getLabelForCurrentLang()),s.propertyObject(t),t.type().toLowerCase()==="owl:datatypeProperty".toLowerCase()&&s.setConfigName("owlDatatypeProperty"),t.type().toLowerCase()==="owl:objectProperty".toLowerCase()&&s.setConfigName("owlObjectProperty"),t.type().toLowerCase()==="rdfs:subClassOf".toLowerCase()&&(s.setConfigName("rdfssubClassOf"),t.label("Subclass of")),s.updateConfig(),s.domain(t.domain().renderingPrimitive()),s.range(t.range().renderingPrimitive());var l=s.createPropertyNode(t.getLabelForCurrentLang());l.defaultElementType(n),l.updateConfig(),T.push(l),F.push(s),t.setRenderingPrimitive(s),S.addRenderingElementToIdMap(s,t.id())},E.zoomToGivenPosition=function(e,t,n){var r=500,o=[D[0],D[1],t,n,R,e];y.transition().duration(r).attr("transform",c(0,o)).attrTween("transform",function(){return function(e){return c(e,o)}}).each("end",function(){D[0]=t,D[1]=n,R=e,y.attr("transform","translate("+D+")scale("+R+")"),h.translate(D),h.scale(R)})},E.zoomToExtentOfGraph=function(){var n=y.node().getBoundingClientRect(),r=50,o=p(n.left,n.top,D,R),i=p(n.right,n.bottom,D,R),a=e.getSize()[0],s=e.getSize()[1];o.x-=r,o.y-=r,i.x+=r,i.y+=r;var l=(i.x-o.x,i.y-o.y,.5*(o.x+i.x)),d=.5*(o.y+i.y),c=.5*a,g=.5*s,f=p(c,g,D,R),v=1;v>h.scaleExtent()[1]&&(v=h.scaleExtent()[1]),v<h.scaleExtent()[0]&&(v=h.scaleExtent()[0]);var m=[f.x,f.y,s/R],x=[l,d,s/v],w=t.interpolateZoom(m,x),b=w.duration;b=500,y.attr("transform",u(m,c,g)).transition().duration(b).attrTween("transform",function(){return function(e){return u(w(e),c,g)}}).each("end",function(){y.attr("transform","translate("+D+")scale("+R+")"),h.translate(D),h.scale(R)})},E.addProperty=function(t,n){var r=new e.singleLinkConstructor(e);r.setLabelText(t),r.setConfigObject(n);var o=r.createPropertyNode(t);return o.setConfigObject(n),I.push(o),F.push(r),r},E.addMLProperty=function(t,n){var r=new e.multiLinkConstructor(e);r.setLabelText(t),r.setConfigObject(n);var o=r.createPropertyNode(t);return o.setConfigObject(n),T.push(o),F.push(r),r},E.addLoopProperty=function(t,n){var r=new e.loopLinkConstructor(e);r.setLabelText(t),r.setConfigObject(n);var o=r.createPropertyNode(t);return o.setConfigObject(n),T.push(o),F.push(r),r},E.addCollapsedMLProperty=function(t,n){var r=new e.multiLinkHandlerConstructor(e);r.setLabelText(t),r.setConfigObject(n);var o=r.createPropertyNode(t);return o.defaultElementType("collapsedMultiLinkProperty"),o.setConfigObject(n),I.push(o),F.push(r),r.visible(!0),r},E.addNode=function(t,n){var r=new e.baseNodeConstructor(e);return r.setConfigObject(n),r.setPosition(100*Math.random(),100*Math.random()),r.setLabelText(t),T.push(r),r},E.addSimilarityNode=function(t,n,r){var o=new e.similarityNodeConstructor(e);return o.connectingonNodeClick(V),o.setConfigObject(n),o.setSimilarity(r),o.setPosition(100*Math.random(),100*Math.random()),o.setLabelText(t),T.push(o),o},E.addSingleLink=function(t,n,r,o){var i=new e.singleLinkConstructor(e);i.setConfigObject(o),i.domain(n),i.range(r),i.setLabelText(t);var a=i.createPropertyNode(t);I.push(a),F.push(i)},E.createDummyNode=function(){},E.setOnNodeClickFunction=function(e){V=e},E.stopForce=function(){b.stop()},E.resumeForce=function(){console.log("FORCE RESUMED AFTER GIZMO ANIMATION!!!"),b.alpha(J)},E.updateAllConfigObjects=function(){m.each(function(e){e.visible()&&(e.updateConfig(),console.log(e.getConfigObj()),e.draw(t.select(this)),e.updateDrawedPosition())}),w.each(function(e){e.visible()&&(e.updateConfig(),
e.draw(t.select(this)),e.updateDrawedPosition())});var n=t.select("#"+e.getCanvasId()+"markerContainer");x.each(function(e){e.visible()&&(e.updateConfig(),e.draw(t.select(this),n),e.updateDrawedPosition())})},E.redraw=function(){console.log("Redrawing Graph!!!");for(var n=e.config.canvas.getLayers(),r=0;r<n.length;r++)t.select("#"+e.getCanvasId()+n[r]).remove();o(),d(),E.drawElements(),b.start(),b.stop(),A||b.resume(),console.log("Redrawing Graph!!! << DONE")},E.redrawForView=function(){for(var n=e.config.canvas.getLayers(),r=0;r<n.length;r++)t.select("#"+e.getCanvasId()+n[r]).remove();o(),d(),E.drawElements()},E.clear=function(){for(var n=e.config.canvas.getLayers(),r=0;r<n.length;r++)t.select("#"+e.getCanvasId()+n[r]).remove();T=[],I=[],F=[]},E.clearGraphData=function(){for(var n=e.config.canvas.getLayers(),r=0;r<n.length;r++)t.select("#"+e.getCanvasId()+n[r]).remove();T=[],I=[],F=[],o(),d(),E.drawElements()},E.drawElements=function(){console.log("number of Nodes="+T.length),m=t.select(n()).selectAll(".nodeElements").data(T).enter().append("g").classed("nodeElements",!0).attr("id",function(e){return e.id()}).call(v),m.each(function(e){e.visible()&&(e.draw(t.select(this)),e.updateDrawedPosition())}),w=t.select(n()).selectAll(".propertyElements").data(I).enter().append("g").classed("propertyElements",!0).attr("id",function(e){return e.id()}).call(v),w.each(function(e){e.visible()&&(e.draw(t.select(this)),e.updateDrawedPosition())}),x=t.select(r()).selectAll(".linkElements").data(F).enter().append("g").classed(".linkElements",!0).call(v);var o=t.select("#"+e.getCanvasId()+"markerContainer");x.each(function(e){e.visible()&&(e.draw(t.select(this),o),e.updateDrawedPosition())})},E.updateRenderingPrimitives=function(){console.log("Updating GizomRep Changes"),J=b.alpha(),b.stop(),m.each(function(e){e.handleGizmoRepresentationChanges()}),w.each(function(e){e.handleGizmoRepresentationChanges()});var e=1;x.each(function(t){t.handleGizmoRepresentationChanges(e,x.size()),e++}),console.log("Updating GizomRep Changes << FINISHED")},E.updateRenderingPrimitivesWithCallBack=function(e,t){J=b.alpha(),b.stop(),m.each(function(e){e.handleGizmoRepresentationChanges()}),w.each(function(e){e.handleGizmoRepresentationChanges()});var n=1;x.each(function(r){r.handleGizmoRepresentationChanges(n,x.size(),e,t),n++})},E.getClassDefinitions=function(){var e;if(0===T.length)return console.log("ERROR: no elements to export"),"";var t='"class": [\n';for(e=0;e<T.length;e++){var n=T[e];n.tNode()&&!n.tNode.getRenderingPrimitive&&n.tNode().getJsonClassDefinition&&(t+=T[e].tNode().getJsonClassDefinition()+"\n,")}return t=t.substring(0,t.length-2),t+="\n]\n"},E.getClassAttributes=function(){if(0===T.length)return console.log("ERROR: no elements to export"),"";var e,t='"classAttribute": [\n';for(e=0;e<T.length;e++){var n=T[e];n.tNode()&&!n.tNode.getRenderingPrimitive&&n.tNode().getJsonClassDescription&&(t+=T[e].tNode().getJsonClassDescription()+"\n,")}return t=t.substring(0,t.length-2),t+="\n]\n"},E.getPropertyDefinitions=function(){if(0===F.length)return console.log("ERROR: no property elements to export"),"";var e,t='"property": [\n';for(e=0;e<F.length;e++){var n=F[e];n.propertyObject()&&n.propertyObject().getJsonPropertyDefinition&&(t+=F[e].propertyObject().getJsonPropertyDefinition()+"\n,")}return t=t.substring(0,t.length-2),t+="\n]\n"},E.getPropertyAttributes=function(){if(0===F.length)return console.log("ERROR: no property elements to export"),"";var e,t='"propertyAttribute": [\n';for(e=0;e<F.length;e++){var n=F[e];n.propertyObject()&&n.propertyObject().getJsonPropertyDescription&&(t+=F[e].propertyObject().getJsonPropertyDescription()+"\n,")}return t=t.substring(0,t.length-2),t+="\n]\n"},E.getJSONRepresentation=function(){var e,t=[];for(e=0;e<T.length;e++){var n=T[e];n.tNode()&&t.push({id:n.tNode().id(),pos:[n.x.toFixed(2),n.y.toFixed(2)],visible:n.visible()})}},E.getGraphOptionsForView=function(){var e=t.transform(y.attr("transform")),n=e.translate[0],r=e.translate[1],o=e.scale[0];console.log("x:"+n+"  y:"+r+"  z:"+o+" forcaAtive: "+!A),D[0]=n,D[1]=r,R=o;var i=!A;return{graphZoomFactor:R,graphTranslation:D,forceActive:i}},E.getJSONRepresentationForView=function(){var e,t=[];for(e=0;e<T.length;e++){var n=T[e];n.tNode()&&n.isNotExportable()===!1&&t.push({id:n.tNode().id(),pos:[n.x.toFixed(2),n.y.toFixed(2)],visible:n.visible()})}for(e=0;e<I.length;e++){var r=I[e];r.tNode()&&r.isNotExportable()===!1&&t.push({id:r.tNode().id(),pos:[r.x.toFixed(2),r.y.toFixed(2)],visible:r.visible()})}return t},E.appendView=function(e,t,n,r){return console.log("Need to create a view for "+e+" with iri "+t),E.ref_appendViewAsJsonObject(e,t,n,r)},E.ref_appendViewAsJsonObject=function(e,t,n,r){var o=E.getJSONRepresentationForView(),i=E.coreApi().getLoadedGizmoFileName(),a={};a.graphOptions=E.getGraphOptionsForView(),a.gizmoConfig=i,a.elementAttributes=o,a.viewPrefix=e,a.viewIRI=t,n&&(a.viewNotation=n,a.usesImport=r),console.log(a);for(var s=!1,l=0;l<G.length;l++){var d=G[l];if(d.viewPrefix===e||d.viewIRI===t)return s=!0,!1}return G.push(a),console.log("Succesfully added View"),E.viewListFunc&&E.viewListFunc(),!0},E.exportSpecification=function(e,t,n,r){console.log("Exporting specification as TTL file");var o="",i=f.prefixList();i.gizmo="http://visualdataweb.org/ontologies/gizmo-core#",i[e]=t+"#";var a,s=[];for(a=0;a<n.length;a++)r[a]===!0&&s.push(n[a]);for(console.log("---------------------------------------"),console.log(s),g(n,i),a=0;a<G.length;a++)i[G[a].viewPrefix]=G[a].viewIRI+"#";var l=S.getDatatypeAssertionMap();o+="######### PREFIX DEFINITIONS ###########\n";for(var d in i)i.hasOwnProperty(d)&&(o+="@prefix "+d+": <"+i[d]+"> .\n");o+="\n<"+t+"> rdf:type owl:Ontology;\n";for(var p=0;p<s.length;p++)o+="\t\towl:imports <"+s[p]+">;\n";o=o.slice(0,o.length-2),o+=" .\n\n";var u;o+="############ Specification Definition Individual ###########\n";var c=e,h=c+":specificationDefinition rdf:type owl:NamedIndividual;\n";for(u=0;u<n.length;u++)h+="\t\t gizmo:providesNotation <"+n[u]+">;\n";for(u=0;u<G.length;u++)h+="\t\t gizmo:providesView <"+G[u].viewIRI+">;\n";var v=h.slice(0,h.length-2);v+=" . \n\n",o+=v,o+="######### Notation Array                   ###########\n",o+="######### Number of provided Notations : "+n.length+" ###########\n";var y=0;for(u=0;u<n.length;u++){var m=n[u];if(s.indexOf(m)===-1){y++,o+="#Explicitly Imported Notation "+y+": <"+m+"> ###########\n",o+="#############################################################################\n";for(var x,w=0;w<B.length;w++){var b=B[w];if(b.header&&b.header.iri){var C=b.header.iri;if(0===m.localeCompare(C)){x=b;break}}}if(x){var L="",P=x.header.prefixList;for(var O in P)if(P.hasOwnProperty(O)){var E=P[O];if(0===m.localeCompare(E)){L=O;break}}for(var T=x.gizmoAnnotations,F=0;F<T.length;F++){var I=T[F],D=I.annotations.targetElement;o+="########## "+D+" ########## \n";var R=I.iri,M="";if(R.indexOf(m)!==-1){var A=R.split(m)[1];0===A.indexOf("#")&&(A=A.slice(1)),M=L+":"+A}o+=M+" rdf:type owl:NamedIndividual;\n";var _="",z=I.annotations;for(var H in z)if(z.hasOwnProperty(H)){var j="rdfs:Literal";l[H]&&(j=l[H]),_+="targetElement"===H?"\t\tgizmo:"+H+" "+z[H]+";\n":"\t\tgizmo:"+H+' "'+z[H]+'"^^'+j+";\n"}var V=_.slice(0,_.length-2);V+=" . \n\n",o+=V}}}}for(var W=0;W<G.length;W++){var J=G[W];o+="\n\n########### View "+(W+1)+" ############\n\n",console.log(J.graphOptions);var U=J.viewPrefix;o+="########### Graph Options of View "+(W+1)+" ############\n\n",o+=U+":viewDefinitions rdf:type owl:NamedIndividual;\n",J.viewNotation&&n.indexOf(J.viewNotation)!==-1&&(o+="\t\t gizmo:viewUsesNotation <"+J.viewNotation+">;\n"),o+='\t\t gizmo:forceLayoutActive "'+J.graphOptions.forceActive+'"^^xsd:boolean;\n',o+='\t\t gizmo:graphZoomFactor "'+J.graphOptions.graphZoomFactor.toFixed(2)+'"^^xsd:double;\n',o+='\t\t gizmo:graphTranslation_X "'+J.graphOptions.graphTranslation[0].toFixed(2)+'"^^xsd:double;\n',o+='\t\t gizmo:graphTranslation_Y "'+J.graphOptions.graphTranslation[1].toFixed(2)+'"^^xsd:double.\n',o+="####################################################################\n\n",o+="###################### Main Ontology Elements#############################\n";var q=[],Z=[];for(a=0;a<k.properties.length;a++){var X=k.properties[a];console.log(X.iri());var Y=X.domain().iri(),K=X.range().iri(),Q=X.iri();q.indexOf(Y)===-1&&q.push(Y),q.indexOf(Q)===-1&&q.push(Q),q.indexOf(K)===-1&&q.push(K);var $={};$.subjectElement=Y,$.predicateElement=Q,$.objectElement=K,$.subjectPosition_x=X.domain().renderingPrimitive().x.toFixed(2),$.subjectPosition_y=X.domain().renderingPrimitive().y.toFixed(2),$.subject_visible=X.domain().renderingPrimitive().visible(),$.predicatePosition_x=X.getRenderingPrimitive().getPropertyNode().x.toFixed(2),$.predicatePosition_y=X.getRenderingPrimitive().getPropertyNode().y.toFixed(2),$.predicate_visible=X.getRenderingPrimitive().getPropertyNode().visible(),$.objectPosition_x=X.range().renderingPrimitive().x.toFixed(2),$.objectPosition_y=X.range().renderingPrimitive().y.toFixed(2),$.object_visible=X.range().renderingPrimitive().visible(),Z.push($)}for(a=0;a<k.nodes.length;a++){var ee=k.nodes[a],te=ee.iri();if(q.indexOf(te)===-1){console.log("found single Class Element "+te);var ne={};ne.targetElement=te,ne.targetPosition_x=ee.renderingPrimitive().x.toFixed(2),ne.targetPosition_y=ee.renderingPrimitive().y.toFixed(2),ne.target_visible=ee.renderingPrimitive().visible(),Z.push(ne)}}for(a=0;a<Z.length;a++){var re="",oe=Z[a];re+="########### Triple Definition "+a+" ###########\n",re+=U+":triplePositions_"+a+" rdf:type owl:NamedIndividual;\n";for(d in oe)if(oe.hasOwnProperty(d)){var ie=d,ae=oe[d],se="rdfs:Literal";l[ie]&&(se=l[ie]);var le=!1;if("subjectElement"!==ie&&"predicateElement"!==ie&&"objectElement"!==ie&&"targetElement"!==ie||(le=!0),le===!1)re+="\t\t gizmo:"+ie+' "'+ae+'"^^'+se+";\n";else{var de=S.prefixedNameForTTLExport(i,ae);re+="\t\t gizmo:"+ie+" "+de+";\n"}}var pe=re.slice(0,re.length-2);pe+=" . \n\n",o+=pe}q=[],Z=[]}N.classed("hidden",!1),N.node().value=o},E.isMultiplicationElement=function(e){var t=["owl:Thing","rdfs:Literal","rdfs:subClassOf"];return t.indexOf(e)!==-1},E.currentlyUsedNotation=function(e){return arguments.length?void(O=e):O},E.currentlyUsedNotationObject=function(){for(var e=0;e<B.length;e++)if(0===B[e].header.iri.localeCompare(O))return B[e]},E.getNotationArray=function(){return B},E.getOntologyPrefixFromPrefixList=function(e){if(e.header&&e.header.iri){var t=e.header.iri,n=e.header.prefixList;for(var r in n)if(n.hasOwnProperty(r)){var o=n[r];if(0===t.localeCompare(o))return r}}},E.addNotation=function(e){if(e.header){var t=e.header.iri;E.currentlyUsedNotation(t),console.log("givenNotationIRI "+t);for(var n=0;n<B.length;n++){var r=B[n].header.iri;if(console.log("cmpIRI  "+r),0===t.localeCompare(r))return void console.log("already seen this notation")}B.push(e)}},E.appendViewAsJsonObject=function(){var e=E.getJSONRepresentationForView(),t=E.coreApi().getLoadedGizmoFileName(),n={};n.graphOptions=E.getGraphOptionsForView(),n.gizmoConfig=t,n.elementAttributes=e,console.log(n),G.push(n),console.log("Succesfully added View"),E.viewListFunc&&E.viewListFunc()},E.getViews=function(){return G},E.getCurrentViewIndex=function(){return U},E.getAllViewDefinitions=function(){if(0===G.length)return"";console.log("requiesting all View Defs "+G.length);var e,t='"viewDefinitions": [ \n',n=G.length;for(e=0;e<n;e++)t+=JSON.stringify(G[e],null," ")+"\n,";return t=t.substring(0,t.length-2),t+="\n],\n"},E}}).call(t,n(2))}]);